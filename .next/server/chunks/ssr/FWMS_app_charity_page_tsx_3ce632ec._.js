module.exports=[47810,a=>{"use strict";var b=a.i(76681),c=a.i(39158),d=a.i(2471),e=a.i(71594),f=a.i(23098),g=a.i(52336),h=a.i(71709),i=a.i(98110),j=a.i(37483),k=a.i(78189),l=a.i(15751),m=a.i(46294);let n=(0,a.i(32269).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var o=a.i(46797),p=a.i(25614),p=p,q=a.i(58273),r=a.i(25327);function s(){let[a,s]=(0,q.useState)([]),[t,u]=(0,q.useState)([]),[v,w]=(0,q.useState)(!0),[x,y]=(0,q.useState)(null),[z,A]=(0,q.useState)(null),[B,C]=(0,q.useState)(!1),[D,E]=(0,q.useState)(""),[F,G]=(0,q.useState)([]),[H,I]=(0,q.useState)(!1),[J,K]=(0,q.useState)(null),[L,M]=(0,q.useState)("none"),[N,O]=(0,q.useState)({}),[P,Q]=(0,q.useState)([]),[R,S]=(0,q.useState)(0),[T,U]=(0,q.useState)(new Set);(0,q.useEffect)(()=>{let a=localStorage.getItem("charity-seen-items");if(a)try{U(new Set(JSON.parse(a)))}catch(a){console.error("Error loading seen items:",a)}},[]);let V=a=>{Q(b=>b.map(b=>b.id===a?{...b,read:!0}:b))};(0,q.useEffect)(()=>{S(P.filter(a=>!a.read).length)},[P]),(0,q.useEffect)(()=>{let a=async()=>{try{w(!0);let a=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",b=await fetch("/api/marketplace/waste",{headers:{"x-user-id":a}});if(!b.ok){let a=await b.text();console.error("Failed to fetch available food:",b.status,a),y("Could not load available food. Please try again."),w(!1);return}let c=await b.json();console.log("[Charity Portal] Received data from API:",c),console.log("[Charity Portal] Number of items received:",c.length);let d=c.map(a=>{let b="N/A";if(a.expiryDate)try{b=a.expiryDate.match(/^\d{4}-\d{2}-\d{2}$/)?a.expiryDate:new Date(a.expiryDate).toISOString().split("T")[0]}catch(c){b=a.expiryDate}return{id:a.id,cafeId:a.cafeId||a.business?.id,cafe:a.cafeName||a.business?.name||"Green CafÃ©",item:a.itemName,quantity:"number"==typeof a.quantity?`${a.quantity} kg`:a.quantity,expiry:b,rawExpiry:a.expiryDate,description:a.description||a.notes,location:a.business?.address||"123 Main St, Downtown",distance:"2.3 km",cafeContact:a.cafeContact||null}});d=d.sort((a,b)=>{if("expiry"===L){let c=a.rawExpiry?new Date(a.rawExpiry).getTime():Number.MAX_SAFE_INTEGER,d=b.rawExpiry?new Date(b.rawExpiry).getTime():Number.MAX_SAFE_INTEGER;return c-d}if("quantity"===L){let c=Number(a.quantity.replace(" kg",""))||0;return(Number(b.quantity.replace(" kg",""))||0)-c}return 0}),console.log("[Charity Portal] Transformed items:",d),console.log("[Charity Portal] Setting availableFood with",d.length,"items");let e=d.filter(a=>!T.has(a.id));if(e.length>0){let a=e.map(a=>({id:`notif-${a.id}`,title:`New ${a.item} Available`,message:`${a.quantity} of ${a.item} from ${a.cafe} is now available for pickup`,wasteId:a.id,read:!1,createdAt:new Date().toISOString()}));Q(b=>{let c=new Set(b.map(a=>a.id));return[...a.filter(a=>!c.has(a.id)),...b]});let b=new Set([...T,...e.map(a=>a.id)]);U(b),localStorage.setItem("charity-seen-items",JSON.stringify(Array.from(b))),console.log(`[Charity Portal] Found ${e.length} new items, created notifications`)}u(d),y(null)}catch(a){console.error("Error fetching available food:",a),y(a instanceof TypeError&&"Failed to fetch"===a.message?"Cannot reach the server. Is the dev server running?":"Unexpected error while loading food items.")}finally{w(!1)}};a();let b=setInterval(a,5e3);return()=>clearInterval(b)},[L,T]),(0,q.useEffect)(()=>{let a=async()=>{try{let a=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",b=await fetch("/api/charity/requests",{headers:{"x-user-id":a}});if(b.ok){let a=await b.json();G(a),K(null)}else{let a=await b.text();console.error("Failed to fetch my requests:",b.status,a),K("Could not load your requests. Please try again.")}}catch(a){console.error("Error fetching my requests:",a),K(a instanceof TypeError&&"Failed to fetch"===a.message?"Cannot reach the server. Is the dev server running?":"Unexpected error while loading your requests.")}};a();let b=setInterval(a,5e3);return()=>clearInterval(b)},[]);let W=async()=>{if(z)try{let b=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",c=await fetch("/api/charity/requests",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":b},body:JSON.stringify({charityId:b,itemId:z.id,cafeId:z.cafeId,status:"pending",note:D||void 0})});if(c.ok)r.toast.success("Pickup request submitted successfully",{description:`Your request for "${z.item}" has been sent. The caf\xe9 will review and coordinate the pickup time with you.`,duration:6e3,position:"top-center"}),u(a=>a.map(a=>a.id===z.id?{...a,requestStatus:"pending"}:a)),s([...a,z.id]),C(!1),E(""),A(null);else{let a=await c.json();r.toast.error("âŒ Request Failed",{description:a.error||"Failed to send pickup request. Please try again.",duration:6e3,position:"top-center"})}}catch(a){console.error("Error submitting request:",a),r.toast.error("âŒ Error",{description:"Something went wrong. Please try again.",duration:6e3,position:"top-center"})}};return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(c.PublicNav,{}),(0,b.jsx)("main",{className:"pt-24 px-4 pb-12",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-500/10 mb-4",children:(0,b.jsx)(j.Heart,{className:"w-8 h-8 text-red-500"})}),(0,b.jsx)("h1",{className:"font-display font-bold text-4xl text-foreground mb-3",children:"Charity Portal"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Browse available edible food from local cafÃ©s and request pickups to help your community"})]}),(0,b.jsxs)(d.Card,{className:"p-6 mb-8 bg-blue-50 border-blue-200",children:[(0,b.jsx)("h3",{className:"font-display font-bold text-lg text-blue-900 mb-2",children:"How It Works"}),(0,b.jsxs)("ol",{className:"space-y-2 text-sm text-blue-800",children:[(0,b.jsx)("li",{children:"1. Browse edible food available from cafÃ©s below"}),(0,b.jsx)("li",{children:'2. Click "Request Pickup" for items your organization needs'}),(0,b.jsx)("li",{children:"3. Wait for cafÃ© admin approval (usually within 24 hours)"}),(0,b.jsx)("li",{children:"4. Once approved, coordinate pickup time with the cafÃ©"})]})]}),R>0&&(0,b.jsxs)(d.Card,{className:"p-4 mb-6 bg-blue-50 border-blue-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.Bell,{className:"w-5 h-5 text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-blue-900",children:[R," New Notification",1!==R?"s":""]}),(0,b.jsx)("p",{className:"text-sm text-blue-700",children:"New edible food items are available for pickup!"})]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{P.filter(a=>!a.read).forEach(a=>V(a.id))},children:"Mark all as read"})]}),(0,b.jsx)("div",{className:"mt-4 space-y-2",children:P.filter(a=>!a.read).slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-start justify-between p-3 bg-white rounded-lg border border-blue-100",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>V(a.id),className:"ml-2",children:(0,b.jsx)(p.default,{className:"w-4 h-4"})})]},a.id))})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-display font-bold text-2xl text-foreground mb-4",children:H?"My Pickup Requests":"Available Edible Food"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:H?`${F.length} request${1!==F.length?"s":""}`:v?"Loading...":`${t.length} item${1!==t.length?"s":""} available for pickup`})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[!H&&(0,b.jsxs)(i.Select,{value:L,onValueChange:a=>M(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-48",children:(0,b.jsx)(i.SelectValue,{placeholder:"Sort"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"none",children:"Sort: None"}),(0,b.jsx)(i.SelectItem,{value:"expiry",children:"Sort: Closest Expiry"}),(0,b.jsx)(i.SelectItem,{value:"quantity",children:"Sort: Largest Quantity"})]})]}),(0,b.jsx)(e.Button,{variant:H?"default":"outline",onClick:()=>I(!H),children:H?"Browse Available Food":"View My Requests"})]})]}),x?(0,b.jsx)(d.Card,{className:"p-6",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:x})}):H?J?(0,b.jsx)(d.Card,{className:"p-6",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:J})}):0===F.length?(0,b.jsx)(d.Card,{className:"p-6",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:"You haven't made any pickup requests yet."})}):(0,b.jsx)("div",{className:"grid gap-6",children:F.map(a=>(0,b.jsx)(d.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,b.jsx)("div",{className:"flex items-start justify-between gap-6",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(j.Heart,{className:"w-6 h-6 text-red-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-display font-bold text-xl text-foreground",children:a.itemName||"Unknown Item"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.cafeName||"Green CafÃ©"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:(0,b.jsxs)("span",{className:"text-sm",children:["Quantity: ",(0,b.jsxs)("span",{className:"font-medium text-foreground",children:[a.quantity||0," kg"]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(k.Calendar,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm",children:["Requested: ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:new Date(a.requestedAt).toLocaleDateString()})]})]})]}),a.preferredTime&&(0,b.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Preferred Pickup Time:"}),(0,b.jsx)("p",{className:"text-sm text-blue-800",children:a.preferredTime})]}),a.notes&&(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Notes: ",a.notes]})}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-3 flex-wrap",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${"approved"===a.status?"bg-green-500/10 text-green-600 border border-green-500/20":"rejected"===a.status?"bg-red-500/10 text-red-600 border border-red-500/20":"collected"===a.status?"bg-primary/10 text-primary border border-primary/20":"bg-amber-500/10 text-amber-600 border border-amber-500/20"}`,children:["approved"===a.status&&(0,b.jsx)(m.CheckCircle,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"capitalize",children:a.status})]}),"approved"===a.status&&a.cafeContact&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Contact:"}),(0,b.jsx)("span",{children:a.cafeContact.name||"CafÃ© Admin"}),a.cafeContact.email&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,b.jsx)("a",{href:`mailto:${a.cafeContact.email}`,className:"text-primary hover:underline",children:a.cafeContact.email})]})]})]}),"approved"===a.status&&!a.pickupWindow&&(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-900 mb-1",children:"âœ… Request Approved!"}),(0,b.jsxs)("p",{className:"text-sm text-green-800",children:["Please coordinate the final pickup time with the cafÃ©. Your preferred time was: ",a.preferredTime||"Not specified"]})]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>O(b=>({...b,[a.id]:!b[a.id]})),className:"w-full sm:w-auto",children:[(0,b.jsx)(l.MapPin,{className:"w-4 h-4 mr-2"}),N[a.id]?"Hide":"Show"," Pickup Coordination"]}),N[a.id]&&(0,b.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(l.MapPin,{className:"w-5 h-5 text-amber-700"}),(0,b.jsx)("p",{className:"text-base font-bold text-amber-900",children:"Pickup Coordination"})]}),(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-amber-700",children:"ðŸ“"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"CafÃ©: "}),(0,b.jsx)("span",{className:"text-amber-800",children:a.cafeName||"Green CafÃ©"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-amber-700",children:"â°"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Pickup Window: "}),(0,b.jsx)("span",{className:"text-amber-800",children:"Within 24 hours of approval"})]})]}),a.cafeContact?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-amber-700",children:"ðŸ“ž"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person: "}),(0,b.jsx)("span",{className:"text-amber-800",children:a.cafeContact.name||"CafÃ© Admin"})]})]}),a.cafeContact.email&&(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-amber-700",children:"âœ‰ï¸"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Email: "}),(0,b.jsx)("a",{href:`mailto:${a.cafeContact.email}`,className:"text-amber-700 hover:underline font-medium",children:a.cafeContact.email})]})]})]}):(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-amber-700",children:"ðŸ“ž"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person: "}),(0,b.jsx)("span",{className:"text-amber-800",children:"CafÃ© Admin"})]})]})]}),(0,b.jsx)("div",{className:"mt-4 pt-3 border-t border-amber-200",children:(0,b.jsx)("p",{className:"text-sm text-amber-800 italic",children:"Please contact the cafÃ© to arrange pickup time."})})]})]})]})})},a.id))}):v?(0,b.jsx)(d.Card,{className:"p-6",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:"Loading available food items..."})}):0===t.length?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(d.Card,{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"No edible food items available at the moment. Check back later!"})}),F.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-display font-bold text-xl text-foreground mb-4",children:["Requesting Collection (",F.filter(a=>"pending"===a.status||"approved"===a.status).length,")"]}),(0,b.jsx)("div",{className:"grid gap-6",children:F.filter(a=>"pending"===a.status||"approved"===a.status).map(a=>(0,b.jsx)(d.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,b.jsx)("div",{className:"flex items-start justify-between gap-6",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(j.Heart,{className:"w-6 h-6 text-red-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-display font-bold text-xl text-foreground",children:a.itemName||"Unknown Item"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.cafeName||"Green CafÃ©"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:(0,b.jsxs)("span",{className:"text-sm",children:["Quantity: ",(0,b.jsxs)("span",{className:"font-medium text-foreground",children:[a.quantity||0," kg"]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(k.Calendar,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm",children:["Requested: ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:new Date(a.requestedAt).toLocaleDateString()})]})]})]}),a.preferredTime&&(0,b.jsxs)("div",{className:"mb-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Preferred Collection Time:"}),(0,b.jsx)("p",{className:"text-sm text-green-800",children:a.preferredTime})]}),a.notes&&(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Notes: ",a.notes]})}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-3 flex-wrap",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${"approved"===a.status?"bg-green-500/10 text-green-600 border border-green-500/20":"rejected"===a.status?"bg-red-500/10 text-red-600 border border-red-500/20":"collected"===a.status?"bg-primary/10 text-primary border border-primary/20":"bg-amber-500/10 text-amber-600 border border-amber-500/20"}`,children:["approved"===a.status&&(0,b.jsx)(m.CheckCircle,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"capitalize",children:a.status})]}),"approved"===a.status&&a.cafeContact&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Contact:"}),(0,b.jsx)("span",{children:a.cafeContact.name||"CafÃ© Admin"}),a.cafeContact.email&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,b.jsx)("a",{href:`mailto:${a.cafeContact.email}`,className:"text-primary hover:underline",children:a.cafeContact.email})]})]})]}),"approved"===a.status&&!a.pickupWindow&&(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-900 mb-1",children:"âœ… Request Approved!"}),(0,b.jsxs)("p",{className:"text-sm text-green-800",children:["Please coordinate the final collection time with the cafÃ©. Your preferred time was: ",a.preferredTime||"Not specified"]})]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>O(b=>({...b,[a.id]:!b[a.id]})),className:"w-full sm:w-auto",children:[(0,b.jsx)(l.MapPin,{className:"w-4 h-4 mr-2"}),N[a.id]?"Hide":"Show"," Pickup Coordination"]}),N[a.id]&&(0,b.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(l.MapPin,{className:"w-5 h-5 text-amber-700"}),(0,b.jsx)("p",{className:"text-sm font-bold text-amber-900",children:"Pickup Instructions"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Location:"}),(0,b.jsx)("span",{className:"text-amber-800 ml-2",children:a.cafeName||"Green CafÃ©"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Pickup Window:"}),(0,b.jsx)("span",{className:"text-amber-800 ml-2",children:"Within 24 hours of approval"})]}),a.cafeContact&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person:"}),(0,b.jsxs)("div",{className:"text-amber-800 ml-2 mt-1",children:[(0,b.jsx)("p",{children:a.cafeContact.name||"CafÃ© Staff"}),a.cafeContact.email&&(0,b.jsxs)("p",{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(n,{className:"w-3 h-3"}),(0,b.jsx)("a",{href:`mailto:${a.cafeContact.email}`,className:"text-amber-700 hover:underline",children:a.cafeContact.email})]})]})]}),!a.cafeContact&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person:"}),(0,b.jsx)("span",{className:"text-amber-800 ml-2",children:"Please contact the cafÃ© directly"})]})]})]})]}),"scheduled"===a.status&&a.pickupWindow&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"ðŸ“… Pickup Scheduled!"}),(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:["Date: ",a.pickupWindow.date]}),(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:["Time: ",a.pickupWindow.from," - ",a.pickupWindow.to]})]})]})})},a.id))})]})]}):(0,b.jsx)("div",{className:"grid gap-6",children:t.map(c=>(0,b.jsx)(d.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(j.Heart,{className:"w-6 h-6 text-red-500"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-display font-bold text-xl text-foreground",children:c.item}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.cafe}),c.cafeContact&&(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:"ðŸ“ž Contact:"}),(0,b.jsx)("span",{children:c.cafeContact.name||"CafÃ© Admin"})]}),c.cafeContact.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"âœ‰ï¸ Email:"}),(0,b.jsx)("a",{href:`mailto:${c.cafeContact.email}`,className:"text-primary hover:underline",children:c.cafeContact.email})]})]})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(k.Calendar,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm",children:["Expires: ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:c.expiry})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(l.MapPin,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:c.distance})," away"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),(0,b.jsx)("span",{className:"font-bold text-lg text-foreground",children:c.quantity})]}),c.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:c.description}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.location})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-3",children:["pending"===c.requestStatus||a.includes(c.id)?(0,b.jsxs)(e.Button,{disabled:!0,className:"bg-gray-400 text-white cursor-not-allowed",children:[(0,b.jsx)(m.CheckCircle,{className:"w-4 h-4 mr-2"}),"Pending Approval"]}):(0,b.jsxs)(e.Button,{onClick:()=>{A(c),C(!0)},className:"bg-red-500 hover:bg-red-600 text-white",children:[(0,b.jsx)(j.Heart,{className:"w-4 h-4 mr-2"}),"Request Pickup"]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"View Details"})]})]})},c.id))}),(0,b.jsx)(f.Dialog,{open:B,onOpenChange:C,children:(0,b.jsxs)(f.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Confirm Pickup Request"}),(0,b.jsxs)(f.DialogDescription,{children:["Request pickup for ",z?.item," from ",z?.cafe]})]}),(0,b.jsx)("div",{className:"space-y-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"note",children:"Note (Optional)"}),(0,b.jsx)(h.Textarea,{id:"note",placeholder:"e.g., Please pack separately",value:D,onChange:a=>E(a.target.value),rows:3})]})}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,b.jsxs)(e.Button,{onClick:W,className:"bg-red-500 hover:bg-red-600 text-white",children:[(0,b.jsx)(j.Heart,{className:"w-4 h-4 mr-2"}),"Confirm Request"]})]})]})})]})})]})}a.s(["default",()=>s],47810)}];

//# sourceMappingURL=FWMS_app_charity_page_tsx_3ce632ec._.js.map