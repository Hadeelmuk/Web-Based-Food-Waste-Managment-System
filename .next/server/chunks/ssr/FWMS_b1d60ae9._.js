module.exports=[24058,(a,b,c)=>{"use strict";b.exports=a.r(33678).vendored["react-ssr"].ReactServerDOMTurbopackClient},23474,a=>{"use strict";var b=a.i(76681),c=a.i(58273),d=a.i(76754);function e(a,e){return function(f){let g=(0,d.useRouter)(),[h,i]=(0,c.useState)(null);return((0,c.useEffect)(()=>{},[e,g]),h)?(0,b.jsx)(a,{...f,user:h}):null}}a.s(["withAuth",()=>e])},26711,14836,26704,40615,a=>{"use strict";var b=a.i(76681),c=a.i(35801),d=a.i(76754),e=a.i(42974),f=a.i(71594),g=a.i(32269);let h=(0,g.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),i=(0,g.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>i],14836);let j=(0,g.default)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);a.s(["Award",()=>j],26704);let k=(0,g.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),l=(0,g.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),m=(0,g.default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>m],40615);var n=a.i(42539),o=a.i(58273);function p(){let{logout:a,user:g}=(0,e.useAuth)(),p=(0,d.useRouter)(),[q,r]=(0,o.useState)("");return(0,o.useEffect)(()=>{(async()=>{try{let a=JSON.parse(localStorage.getItem("user")||"{}");if(!a.userId)return;a.businessName&&r(a.businessName);let b=await fetch("/api/user/profile",{headers:{"x-user-id":a.userId}});if(b.ok){let a=await b.json(),c=a.business?.name||a.name||"";r(c)}}catch(a){console.error("Error fetching business name:",a)}})();let a=a=>{a.detail?.businessName&&r(a.detail.businessName)};return window.addEventListener("profileUpdated",a),()=>{window.removeEventListener("profileUpdated",a)}},[]),(0,b.jsx)("nav",{className:"fixed top-0 w-full bg-card border-b border-border z-50",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(c.default,{href:"/dashboard",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[(0,b.jsx)(n.default,{src:"/placeholder-logo.png",alt:"From Plate to Plant Logo",width:40,height:40,className:"h-10 w-10 object-contain",priority:!0}),(0,b.jsx)("span",{className:"font-display font-bold text-xl text-foreground",children:"From Plate to Plant"})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-1",children:[(0,b.jsx)(c.default,{href:"/dashboard",children:(0,b.jsxs)(f.Button,{variant:"ghost",className:"text-foreground hover:text-primary",children:[(0,b.jsx)(h,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),(0,b.jsx)(c.default,{href:"/dashboard/log-waste",children:(0,b.jsxs)(f.Button,{variant:"ghost",className:"text-foreground hover:text-primary",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Log Waste"]})}),(0,b.jsx)(c.default,{href:"/dashboard/transportation",children:(0,b.jsxs)(f.Button,{variant:"ghost",className:"text-foreground hover:text-primary",children:[(0,b.jsx)(m,{className:"w-4 h-4 mr-2"}),"Transport"]})}),(0,b.jsx)(c.default,{href:"/dashboard/points",children:(0,b.jsxs)(f.Button,{variant:"ghost",className:"text-foreground hover:text-primary",children:[(0,b.jsx)(j,{className:"w-4 h-4 mr-2"}),"Points"]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(q||g)&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground hidden lg:block font-medium",children:q||g?.organizationName||g?.email||"Signed in"}),(0,b.jsx)(c.default,{href:"/dashboard/settings",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",title:"Settings",children:(0,b.jsx)(k,{className:"w-5 h-5"})})}),(0,b.jsxs)(f.Button,{variant:"ghost",className:"text-foreground hover:text-destructive",onClick:()=>{a(),p.push("/login")},children:[(0,b.jsx)(l,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})})}a.s(["DashboardNav",()=>p],26711)},2471,a=>{"use strict";var b=a.i(76681),c=a.i(18443);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}a.s(["Card",()=>d])},37497,a=>{"use strict";let b=(0,a.i(32269).default)("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);a.s(["Sprout",()=>b],37497)},35430,a=>{"use strict";let b=(0,a.i(32269).default)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);a.s(["Leaf",()=>b],35430)},55733,a=>{"use strict";let b=(0,a.i(32269).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);a.s(["Globe",()=>b],55733)},94911,a=>{"use strict";var b=a.i(76681),c=a.i(26711),d=a.i(2471),e=a.i(26704),f=a.i(35430),g=a.i(37497);let h=(0,a.i(32269).default)("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);var i=a.i(55733),j=a.i(23474),k=a.i(58273);let l=(0,j.withAuth)(function(){let[a,j]=(0,k.useState)(null),[l,m]=(0,k.useState)(!0),n=async()=>{try{m(!0);let a=JSON.parse(localStorage.getItem("user")||"{}"),b=await fetch("/api/stats/impact",{headers:{"x-user-id":a.userId||""}});if(b.ok){let a=await b.json();j({totalPoints:a.totalPoints||0,level:a.level||"Green Starter",nextLevel:a.nextLevel||50,nextLevelName:a.nextLevelName||"Eco Achiever",pointsToNextLevel:a.pointsToNextLevel||50,pointsHistory:a.pointsHistory||[]})}}catch(a){console.error("[Points Page] Error fetching impact stats:",a)}finally{m(!1)}};(0,k.useEffect)(()=>{n();let a=setInterval(n,5e3);return()=>clearInterval(a)},[]);let o=a?.totalPoints||0,p=a?.nextLevel||50,q=a?.level||"Green Starter",r=a?.nextLevelName||"Eco Achiever",s=a?.pointsToNextLevel||50,t=a?.pointsHistory||[];return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(c.DashboardNav,{}),(0,b.jsx)("main",{className:"pt-20 px-4 pb-8",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-5xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"font-display font-bold text-3xl text-foreground mb-2",children:"Sustainability Points"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track your environmental impact and earn rewards"})]}),(0,b.jsxs)(d.Card,{className:"p-8 mb-8 text-center bg-gradient-to-br from-primary/5 to-secondary/5 border-primary/20",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4 border-4 border-primary/30",children:(0,b.jsx)(e.Award,{className:"w-12 h-12 text-primary"})}),(0,b.jsx)("div",{className:"text-6xl font-display font-bold text-primary mb-2",children:l?"...":Math.round(o)}),(0,b.jsx)("div",{className:"text-lg text-muted-foreground mb-6",children:"Total Eco Points"}),(0,b.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Current Level: ",q]}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(o),"/",p]})]}),(0,b.jsx)("div",{className:"w-full h-4 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-secondary transition-all duration-500",style:{width:`${p>0?Math.min(100,o/p*100):0}%`}})}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-2",children:s>0?`${Math.round(s)} points to ${r}`:"Max level reached!"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)(d.Card,{className:`p-6 text-center ${o>=0&&o<50?"border-primary/50 bg-primary/5":"opacity-50"}`,children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-full ${o>=0&&o<50?"bg-primary/10":"bg-muted"} flex items-center justify-center mx-auto mb-3`,children:(0,b.jsx)(g.Sprout,{className:`w-8 h-8 ${o>=0&&o<50?"text-primary":"text-muted-foreground"}`})}),(0,b.jsx)("h3",{className:`font-display font-bold text-lg mb-1 ${o>=0&&o<50?"text-primary":""}`,children:"Green Starter"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"0-49 points"}),(0,b.jsx)("div",{className:`text-xs font-medium ${o>=0&&o<50?"text-primary":o>=50?"text-green-600":"text-muted-foreground"}`,children:o>=50?"Completed":o>=0&&o<50?"Current Level":"Locked"})]}),(0,b.jsxs)(d.Card,{className:`p-6 text-center ${o>=50&&o<100?"border-primary/50 bg-primary/5":"opacity-50"}`,children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-full ${o>=50&&o<100?"bg-primary/10":"bg-muted"} flex items-center justify-center mx-auto mb-3`,children:(0,b.jsx)(f.Leaf,{className:`w-8 h-8 ${o>=50&&o<100?"text-primary":"text-muted-foreground"}`})}),(0,b.jsx)("h3",{className:`font-display font-bold text-lg mb-1 ${o>=50&&o<100?"text-primary":""}`,children:"Eco Achiever"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"50-99 points"}),(0,b.jsx)("div",{className:`text-xs font-medium ${o>=50&&o<100?"text-primary":o>=100?"text-green-600":"text-muted-foreground"}`,children:o>=100?"Completed":o>=50&&o<100?"Current Level":"Locked"})]}),(0,b.jsxs)(d.Card,{className:`p-6 text-center ${o>=100&&o<200?"border-primary/50 bg-primary/5":"opacity-50"}`,children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-full ${o>=100&&o<200?"bg-primary/10":"bg-muted"} flex items-center justify-center mx-auto mb-3`,children:(0,b.jsx)(h,{className:`w-8 h-8 ${o>=100&&o<200?"text-primary":"text-muted-foreground"}`})}),(0,b.jsx)("h3",{className:`font-display font-bold text-lg mb-1 ${o>=100&&o<200?"text-primary":""}`,children:"Green Hero"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"100-199 points"}),(0,b.jsx)("div",{className:`text-xs font-medium ${o>=100&&o<200?"text-primary":o>=200?"text-green-600":"text-muted-foreground"}`,children:o>=200?"Completed":o>=100&&o<200?"Current Level":"Locked"})]}),(0,b.jsxs)(d.Card,{className:`p-6 text-center ${o>=200?"border-primary/50 bg-primary/5":"opacity-50"}`,children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-full ${o>=200?"bg-primary/10":"bg-muted"} flex items-center justify-center mx-auto mb-3`,children:(0,b.jsx)(i.Globe,{className:`w-8 h-8 ${o>=200?"text-primary":"text-muted-foreground"}`})}),(0,b.jsx)("h3",{className:`font-display font-bold text-lg mb-1 ${o>=200?"text-primary":""}`,children:"Sustainability Champion"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"200+ points"}),(0,b.jsx)("div",{className:`text-xs font-medium ${o>=200?"text-primary":"text-muted-foreground"}`,children:o>=200?"Current Level":"Locked"})]})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("h3",{className:"font-display font-bold text-xl text-foreground mb-6",children:"Recent Achievements"}),l?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading achievements..."}):0===t.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No achievements yet. Start collecting waste to earn points!"}):(0,b.jsx)("div",{className:"space-y-4",children:t.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.reason}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.date})]}),(0,b.jsx)("div",{className:"text-lg font-display font-bold text-primary",children:a.points})]},c))})]})]})})]})},["staff"]);a.s(["default",0,l],94911)}];

//# sourceMappingURL=FWMS_b1d60ae9._.js.map