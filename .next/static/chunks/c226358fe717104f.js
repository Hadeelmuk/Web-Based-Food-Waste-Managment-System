(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11776,e=>{"use strict";var t=e.i(74226);e.s(["Calendar",()=>t.default])},6320,e=>{"use strict";let t=(0,e.i(81033).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],6320)},74226,e=>{"use strict";let t=(0,e.i(81033).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t])},63580,e=>{"use strict";let t=(0,e.i(81033).default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);e.s(["Bell",()=>t],63580)},59687,e=>{"use strict";var t=e.i(18165),s=e.i(57659),a=e.i(75233),r=e.i(19063),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let n=t.forwardRef((e,t)=>{let{asChild:n,...i}=e,l=n?a.Slot:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(l,{...i,ref:t})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});function i(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>n,"dispatchDiscreteCustomEvent",()=>i])},57141,e=>{"use strict";var t=e.i(18165),s=e.i(19063);function a(e,a){let r=t.createContext(a),n=e=>{let{children:a,...n}=e,i=t.useMemo(()=>n,Object.values(n));return(0,s.jsx)(r.Provider,{value:i,children:a})};return n.displayName=e+"Provider",[n,function(s){let n=t.useContext(r);if(n)return n;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function r(e,a=[]){let n=[],i=()=>{let s=n.map(e=>t.createContext(e));return function(a){let r=a?.[e]||s;return t.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return i.scopeName=e,[function(a,r){let i=t.createContext(r),l=n.length;n=[...n,r];let o=a=>{let{scope:r,children:n,...o}=a,d=r?.[e]?.[l]||i,c=t.useMemo(()=>o,Object.values(o));return(0,s.jsx)(d.Provider,{value:c,children:n})};return o.displayName=a+"Provider",[o,function(s,n){let o=n?.[e]?.[l]||i,d=t.useContext(o);if(d)return d;if(void 0!==r)return r;throw Error(`\`${s}\` must be used within \`${a}\``)}]},function(...e){let s=e[0];if(1===e.length)return s;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return t.useMemo(()=>({[`__scope${s.scopeName}`]:r}),[r])}};return a.scopeName=s.scopeName,a}(i,...a)]}e.s(["createContext",()=>a,"createContextScope",()=>r])},67516,e=>{"use strict";function t(e,s,{checkForDefaultPrevented:a=!0}={}){return function(t){if(e?.(t),!1===a||!t.defaultPrevented)return s?.(t)}}e.s(["composeEventHandlers",()=>t])},51382,34561,e=>{"use strict";var t=e.i(18165),s=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>s],34561);var a=t["useId".toString()]||(()=>void 0),r=0;function n(e){let[n,i]=t.useState(a());return s(()=>{e||i(e=>e??String(r++))},[e]),e||(n?`radix-${n}`:"")}e.s(["useId",()=>n],51382)},60295,e=>{"use strict";var t=e.i(18165);function s(e){let s=t.useRef(e);return t.useEffect(()=>{s.current=e}),t.useMemo(()=>(...e)=>s.current?.(...e),[])}e.s(["useCallbackRef",()=>s])},4500,e=>{"use strict";var t=e.i(18165),s=e.i(60295);function a({prop:e,defaultProp:a,onChange:r=()=>{}}){let[n,i]=function({defaultProp:e,onChange:a}){let r=t.useState(e),[n]=r,i=t.useRef(n),l=(0,s.useCallbackRef)(a);return t.useEffect(()=>{i.current!==n&&(l(n),i.current=n)},[n,i,l]),r}({defaultProp:a,onChange:r}),l=void 0!==e,o=l?e:n,d=(0,s.useCallbackRef)(r);return[o,t.useCallback(t=>{if(l){let s="function"==typeof t?t(e):t;s!==e&&d(s)}else i(t)},[l,e,i,d])]}e.s(["useControllableState",()=>a])},15451,e=>{"use strict";var t=e.i(18165),s=e.i(57141),a=e.i(59837),r=e.i(75233),n=e.i(19063);function i(e){let i=e+"CollectionProvider",[l,o]=(0,s.createContextScope)(i),[d,c]=l(i,{collectionRef:{current:null},itemMap:new Map}),m=e=>{let{scope:s,children:a}=e,r=t.default.useRef(null),i=t.default.useRef(new Map).current;return(0,n.jsx)(d,{scope:s,itemMap:i,collectionRef:r,children:a})};m.displayName=i;let u=e+"CollectionSlot",x=t.default.forwardRef((e,t)=>{let{scope:s,children:i}=e,l=c(u,s),o=(0,a.useComposedRefs)(t,l.collectionRef);return(0,n.jsx)(r.Slot,{ref:o,children:i})});x.displayName=u;let f=e+"CollectionItemSlot",p="data-radix-collection-item",h=t.default.forwardRef((e,s)=>{let{scope:i,children:l,...o}=e,d=t.default.useRef(null),m=(0,a.useComposedRefs)(s,d),u=c(f,i);return t.default.useEffect(()=>(u.itemMap.set(d,{ref:d,...o}),()=>void u.itemMap.delete(d))),(0,n.jsx)(r.Slot,{...{[p]:""},ref:m,children:l})});return h.displayName=f,[{Provider:m,Slot:x,ItemSlot:h},function(s){let a=c(e+"CollectionConsumer",s);return t.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`));return Array.from(a.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[a.collectionRef,a.itemMap])},o]}e.s(["createCollection",()=>i])},96879,e=>{"use strict";var t=e.i(18165);e.i(19063);var s=t.createContext(void 0);function a(e){let a=t.useContext(s);return e||a||"ltr"}e.s(["useDirection",()=>a])},89871,e=>{"use strict";var t=e.i(19063),s=e.i(18165),a=e.i(59687),r=s.forwardRef((e,s)=>(0,t.jsx)(a.Primitive.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var n=e.i(30003);function i({className:e,...s}){return(0,t.jsx)(r,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>i],89871)},53744,e=>{"use strict";var t=e.i(19063),s=e.i(30003);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},23857,e=>{"use strict";var t=e.i(18165),s=e.i(59837),a=e.i(34561),r=e=>{var r;let i,l,{present:o,children:d}=e,c=function(e){var s,r;let[i,l]=t.useState(),o=t.useRef({}),d=t.useRef(e),c=t.useRef("none"),[m,u]=(s=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>r[e][t]??e,s));return t.useEffect(()=>{let e=n(o.current);c.current="mounted"===m?e:"none"},[m]),(0,a.useLayoutEffect)(()=>{let t=o.current,s=d.current;if(s!==e){let a=c.current,r=n(t);e?u("MOUNT"):"none"===r||t?.display==="none"?u("UNMOUNT"):s&&a!==r?u("ANIMATION_OUT"):u("UNMOUNT"),d.current=e}},[e,u]),(0,a.useLayoutEffect)(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,s=s=>{let a=n(o.current).includes(s.animationName);if(s.target===i&&a&&(u("ANIMATION_END"),!d.current)){let s=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=s)})}},a=e=>{e.target===i&&(c.current=n(o.current))};return i.addEventListener("animationstart",a),i.addEventListener("animationcancel",s),i.addEventListener("animationend",s),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",s),i.removeEventListener("animationend",s)}}u("ANIMATION_END")},[i,u]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:t.useCallback(e=>{e&&(o.current=getComputedStyle(e)),l(e)},[])}}(o),m="function"==typeof d?d({present:c.isPresent}):t.Children.only(d),u=(0,s.useComposedRefs)(c.ref,(r=m,(l=(i=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?r.ref:(l=(i=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?r.props.ref:r.props.ref||r.ref));return"function"==typeof d||c.isPresent?t.cloneElement(m,{ref:u}):null};function n(e){return e?.animationName||"none"}r.displayName="Presence",e.s(["Presence",()=>r])},32565,e=>{"use strict";let t=(0,e.i(81033).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],32565)},75815,78192,e=>{"use strict";var t=e.i(19063),s=e.i(18165),a=e.i(67516),r=e.i(59837),n=e.i(57141),i=e.i(51382),l=e.i(4500),o=e.i(8741),d=e.i(38046),c=e.i(28111),m=e.i(23857),u=e.i(59687),x=e.i(71097),f=e.i(78013),p=e.i(85244),h=e.i(75233),g="Dialog",[j,N]=(0,n.createContextScope)(g),[b,v]=j(g),y=e=>{let{__scopeDialog:a,children:r,open:n,defaultOpen:o,onOpenChange:d,modal:c=!0}=e,m=s.useRef(null),u=s.useRef(null),[x=!1,f]=(0,l.useControllableState)({prop:n,defaultProp:o,onChange:d});return(0,t.jsx)(b,{scope:a,triggerRef:m,contentRef:u,contentId:(0,i.useId)(),titleId:(0,i.useId)(),descriptionId:(0,i.useId)(),open:x,onOpenChange:f,onOpenToggle:s.useCallback(()=>f(e=>!e),[f]),modal:c,children:r})};y.displayName=g;var w="DialogTrigger";s.forwardRef((e,s)=>{let{__scopeDialog:n,...i}=e,l=v(w,n),o=(0,r.useComposedRefs)(s,l.triggerRef);return(0,t.jsx)(u.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":H(l.open),...i,ref:o,onClick:(0,a.composeEventHandlers)(e.onClick,l.onOpenToggle)})}).displayName=w;var C="DialogPortal",[k,S]=j(C,{forceMount:void 0}),P=e=>{let{__scopeDialog:a,forceMount:r,children:n,container:i}=e,l=v(C,a);return(0,t.jsx)(k,{scope:a,forceMount:r,children:s.Children.map(n,e=>(0,t.jsx)(m.Presence,{present:r||l.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:i,children:e})}))})};P.displayName=C;var D="DialogOverlay",R=s.forwardRef((e,s)=>{let a=S(D,e.__scopeDialog),{forceMount:r=a.forceMount,...n}=e,i=v(D,e.__scopeDialog);return i.modal?(0,t.jsx)(m.Presence,{present:r||i.open,children:(0,t.jsx)(I,{...n,ref:s})}):null});R.displayName=D;var I=s.forwardRef((e,s)=>{let{__scopeDialog:a,...r}=e,n=v(D,a);return(0,t.jsx)(f.RemoveScroll,{as:h.Slot,allowPinchZoom:!0,shards:[n.contentRef],children:(0,t.jsx)(u.Primitive.div,{"data-state":H(n.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),E="DialogContent",M=s.forwardRef((e,s)=>{let a=S(E,e.__scopeDialog),{forceMount:r=a.forceMount,...n}=e,i=v(E,e.__scopeDialog);return(0,t.jsx)(m.Presence,{present:r||i.open,children:i.modal?(0,t.jsx)(O,{...n,ref:s}):(0,t.jsx)(T,{...n,ref:s})})});M.displayName=E;var O=s.forwardRef((e,n)=>{let i=v(E,e.__scopeDialog),l=s.useRef(null),o=(0,r.useComposedRefs)(n,i.contentRef,l);return s.useEffect(()=>{let e=l.current;if(e)return(0,p.hideOthers)(e)},[]),(0,t.jsx)(q,{...e,ref:o,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.triggerRef.current?.focus()}),onPointerDownOutside:(0,a.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:(0,a.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),T=s.forwardRef((e,a)=>{let r=v(E,e.__scopeDialog),n=s.useRef(!1),i=s.useRef(!1);return(0,t.jsx)(q,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let s=t.target;r.triggerRef.current?.contains(s)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),q=s.forwardRef((e,a)=>{let{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:c,...m}=e,u=v(E,n),f=s.useRef(null),p=(0,r.useComposedRefs)(a,f);return(0,x.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:c,children:(0,t.jsx)(o.DismissableLayer,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":H(u.open),...m,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G,{titleId:u.titleId}),(0,t.jsx)(J,{contentRef:f,descriptionId:u.descriptionId})]})]})}),A="DialogTitle",F=s.forwardRef((e,s)=>{let{__scopeDialog:a,...r}=e,n=v(A,a);return(0,t.jsx)(u.Primitive.h2,{id:n.titleId,...r,ref:s})});F.displayName=A;var $="DialogDescription",_=s.forwardRef((e,s)=>{let{__scopeDialog:a,...r}=e,n=v($,a);return(0,t.jsx)(u.Primitive.p,{id:n.descriptionId,...r,ref:s})});_.displayName=$;var L="DialogClose",B=s.forwardRef((e,s)=>{let{__scopeDialog:r,...n}=e,i=v(L,r);return(0,t.jsx)(u.Primitive.button,{type:"button",...n,ref:s,onClick:(0,a.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function H(e){return e?"open":"closed"}B.displayName=L;var W="DialogTitleWarning",[U,z]=(0,n.createContext)(W,{contentName:E,titleName:A,docsSlug:"dialog"}),G=({titleId:e})=>{let t=z(W),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return s.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},J=({contentRef:e,descriptionId:t})=>{let a=z("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return s.useEffect(()=>{let s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null};let V=(0,e.i(81033).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["default",()=>V],78192);var Q=e.i(30003);function Y({...e}){return(0,t.jsx)(y,{"data-slot":"dialog",...e})}function K({...e}){return(0,t.jsx)(P,{"data-slot":"dialog-portal",...e})}function X({className:e,...s}){return(0,t.jsx)(R,{"data-slot":"dialog-overlay",className:(0,Q.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function Z({className:e,children:s,showCloseButton:a=!0,...r}){return(0,t.jsxs)(K,{"data-slot":"dialog-portal",children:[(0,t.jsx)(X,{}),(0,t.jsxs)(M,{"data-slot":"dialog-content",className:(0,Q.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[s,a&&(0,t.jsxs)(B,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(V,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ee({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,Q.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function et({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,Q.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function es({className:e,...s}){return(0,t.jsx)(F,{"data-slot":"dialog-title",className:(0,Q.cn)("text-lg leading-none font-semibold",e),...s})}function ea({className:e,...s}){return(0,t.jsx)(_,{"data-slot":"dialog-description",className:(0,Q.cn)("text-muted-foreground text-sm",e),...s})}e.s(["Dialog",()=>Y,"DialogContent",()=>Z,"DialogDescription",()=>ea,"DialogFooter",()=>et,"DialogHeader",()=>ee,"DialogTitle",()=>es],75815)},42481,e=>{"use strict";var t=e.i(19063),s=e.i(38762),a=e.i(28739),r=e.i(80120),n=e.i(75815),i=e.i(89871),l=e.i(53744),o=e.i(50245),d=e.i(78857),c=e.i(11776),m=e.i(32565),u=e.i(6320);let x=(0,e.i(81033).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var f=e.i(63580),p=e.i(78192),p=p,h=e.i(18165),g=e.i(87285);function j(){let[e,j]=(0,h.useState)([]),[N,b]=(0,h.useState)([]),[v,y]=(0,h.useState)(!0),[w,C]=(0,h.useState)(null),[k,S]=(0,h.useState)(null),[P,D]=(0,h.useState)(!1),[R,I]=(0,h.useState)(""),[E,M]=(0,h.useState)([]),[O,T]=(0,h.useState)(!1),[q,A]=(0,h.useState)(null),[F,$]=(0,h.useState)("none"),[_,L]=(0,h.useState)({}),[B,H]=(0,h.useState)([]),[W,U]=(0,h.useState)(0),[z,G]=(0,h.useState)(new Set);(0,h.useEffect)(()=>{let e=localStorage.getItem("charity-seen-items");if(e)try{G(new Set(JSON.parse(e)))}catch(e){console.error("Error loading seen items:",e)}},[]);let J=e=>{H(t=>t.map(t=>t.id===e?{...t,read:!0}:t))};(0,h.useEffect)(()=>{U(B.filter(e=>!e.read).length)},[B]),(0,h.useEffect)(()=>{let e=async()=>{try{y(!0);let e=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",t=await fetch("/api/marketplace/waste",{headers:{"x-user-id":e}});if(!t.ok){let e=await t.text();console.error("Failed to fetch available food:",t.status,e),C("Could not load available food. Please try again."),y(!1);return}let s=await t.json();console.log("[Charity Portal] Received data from API:",s),console.log("[Charity Portal] Number of items received:",s.length);let a=s.map(e=>{let t="N/A";if(e.expiryDate)try{t=e.expiryDate.match(/^\d{4}-\d{2}-\d{2}$/)?e.expiryDate:new Date(e.expiryDate).toISOString().split("T")[0]}catch(s){t=e.expiryDate}return{id:e.id,cafeId:e.cafeId||e.business?.id,cafe:e.cafeName||e.business?.name||"Green CafÃ©",item:e.itemName,quantity:"number"==typeof e.quantity?`${e.quantity} kg`:e.quantity,expiry:t,rawExpiry:e.expiryDate,description:e.description||e.notes,location:e.business?.address||"123 Main St, Downtown",distance:"2.3 km",cafeContact:e.cafeContact||null}});a=a.sort((e,t)=>{if("expiry"===F){let s=e.rawExpiry?new Date(e.rawExpiry).getTime():Number.MAX_SAFE_INTEGER,a=t.rawExpiry?new Date(t.rawExpiry).getTime():Number.MAX_SAFE_INTEGER;return s-a}if("quantity"===F){let s=Number(e.quantity.replace(" kg",""))||0;return(Number(t.quantity.replace(" kg",""))||0)-s}return 0}),console.log("[Charity Portal] Transformed items:",a),console.log("[Charity Portal] Setting availableFood with",a.length,"items");let r=a.filter(e=>!z.has(e.id));if(r.length>0){let e=r.map(e=>({id:`notif-${e.id}`,title:`New ${e.item} Available`,message:`${e.quantity} of ${e.item} from ${e.cafe} is now available for pickup`,wasteId:e.id,read:!1,createdAt:new Date().toISOString()}));H(t=>{let s=new Set(t.map(e=>e.id));return[...e.filter(e=>!s.has(e.id)),...t]});let t=new Set([...z,...r.map(e=>e.id)]);G(t),localStorage.setItem("charity-seen-items",JSON.stringify(Array.from(t))),console.log(`[Charity Portal] Found ${r.length} new items, created notifications`)}b(a),C(null)}catch(e){console.error("Error fetching available food:",e),C(e instanceof TypeError&&"Failed to fetch"===e.message?"Cannot reach the server. Is the dev server running?":"Unexpected error while loading food items.")}finally{y(!1)}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[F,z]),(0,h.useEffect)(()=>{let e=async()=>{try{let e=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",t=await fetch("/api/charity/requests",{headers:{"x-user-id":e}});if(t.ok){let e=await t.json();M(e),A(null)}else{let e=await t.text();console.error("Failed to fetch my requests:",t.status,e),A("Could not load your requests. Please try again.")}}catch(e){console.error("Error fetching my requests:",e),A(e instanceof TypeError&&"Failed to fetch"===e.message?"Cannot reach the server. Is the dev server running?":"Unexpected error while loading your requests.")}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]);let V=async()=>{if(k)try{let t=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",s=await fetch("/api/charity/requests",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":t},body:JSON.stringify({charityId:t,itemId:k.id,cafeId:k.cafeId,status:"pending",note:R||void 0})});if(s.ok)g.toast.success("Pickup request submitted successfully",{description:`Your request for "${k.item}" has been sent. The caf\xe9 will review and coordinate the pickup time with you.`,duration:6e3,position:"top-center"}),b(e=>e.map(e=>e.id===k.id?{...e,requestStatus:"pending"}:e)),j([...e,k.id]),D(!1),I(""),S(null);else{let e=await s.json();g.toast.error("âŒ Request Failed",{description:e.error||"Failed to send pickup request. Please try again.",duration:6e3,position:"top-center"})}}catch(e){console.error("Error submitting request:",e),g.toast.error("âŒ Error",{description:"Something went wrong. Please try again.",duration:6e3,position:"top-center"})}};return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(s.PublicNav,{}),(0,t.jsx)("main",{className:"pt-24 px-4 pb-12",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-500/10 mb-4",children:(0,t.jsx)(d.Heart,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h1",{className:"font-display font-bold text-4xl text-foreground mb-3",children:"Charity Portal"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Browse available edible food from local cafÃ©s and request pickups to help your community"})]}),(0,t.jsxs)(a.Card,{className:"p-6 mb-8 bg-blue-50 border-blue-200",children:[(0,t.jsx)("h3",{className:"font-display font-bold text-lg text-blue-900 mb-2",children:"How It Works"}),(0,t.jsxs)("ol",{className:"space-y-2 text-sm text-blue-800",children:[(0,t.jsx)("li",{children:"1. Browse edible food available from cafÃ©s below"}),(0,t.jsx)("li",{children:'2. Click "Request Pickup" for items your organization needs'}),(0,t.jsx)("li",{children:"3. Wait for cafÃ© admin approval (usually within 24 hours)"}),(0,t.jsx)("li",{children:"4. Once approved, coordinate pickup time with the cafÃ©"})]})]}),W>0&&(0,t.jsxs)(a.Card,{className:"p-4 mb-6 bg-blue-50 border-blue-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(f.Bell,{className:"w-5 h-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-blue-900",children:[W," New Notification",1!==W?"s":""]}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"New edible food items are available for pickup!"})]})]}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{B.filter(e=>!e.read).forEach(e=>J(e.id))},children:"Mark all as read"})]}),(0,t.jsx)("div",{className:"mt-4 space-y-2",children:B.filter(e=>!e.read).slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between p-3 bg-white rounded-lg border border-blue-100",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleString()})]}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>J(e.id),className:"ml-2",children:(0,t.jsx)(p.default,{className:"w-4 h-4"})})]},e.id))})]}),(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-display font-bold text-2xl text-foreground mb-4",children:O?"My Pickup Requests":"Available Edible Food"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:O?`${E.length} request${1!==E.length?"s":""}`:v?"Loading...":`${N.length} item${1!==N.length?"s":""} available for pickup`})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[!O&&(0,t.jsxs)(o.Select,{value:F,onValueChange:e=>$(e),children:[(0,t.jsx)(o.SelectTrigger,{className:"w-48",children:(0,t.jsx)(o.SelectValue,{placeholder:"Sort"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"none",children:"Sort: None"}),(0,t.jsx)(o.SelectItem,{value:"expiry",children:"Sort: Closest Expiry"}),(0,t.jsx)(o.SelectItem,{value:"quantity",children:"Sort: Largest Quantity"})]})]}),(0,t.jsx)(r.Button,{variant:O?"default":"outline",onClick:()=>T(!O),children:O?"Browse Available Food":"View My Requests"})]})]}),w?(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:w})}):O?q?(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:q})}):0===E.length?(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"You haven't made any pickup requests yet."})}):(0,t.jsx)("div",{className:"grid gap-6",children:E.map(e=>(0,t.jsx)(a.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,t.jsx)("div",{className:"flex items-start justify-between gap-6",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(d.Heart,{className:"w-6 h-6 text-red-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-display font-bold text-xl text-foreground",children:e.itemName||"Unknown Item"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.cafeName||"Green CafÃ©"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:(0,t.jsxs)("span",{className:"text-sm",children:["Quantity: ",(0,t.jsxs)("span",{className:"font-medium text-foreground",children:[e.quantity||0," kg"]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(c.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm",children:["Requested: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:new Date(e.requestedAt).toLocaleDateString()})]})]})]}),e.preferredTime&&(0,t.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Preferred Pickup Time:"}),(0,t.jsx)("p",{className:"text-sm text-blue-800",children:e.preferredTime})]}),e.notes&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Notes: ",e.notes]})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3 flex-wrap",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${"approved"===e.status?"bg-green-500/10 text-green-600 border border-green-500/20":"rejected"===e.status?"bg-red-500/10 text-red-600 border border-red-500/20":"collected"===e.status?"bg-primary/10 text-primary border border-primary/20":"bg-amber-500/10 text-amber-600 border border-amber-500/20"}`,children:["approved"===e.status&&(0,t.jsx)(u.CheckCircle,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"capitalize",children:e.status})]}),"approved"===e.status&&e.cafeContact&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Contact:"}),(0,t.jsx)("span",{children:e.cafeContact.name||"CafÃ© Admin"}),e.cafeContact.email&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,t.jsx)("a",{href:`mailto:${e.cafeContact.email}`,className:"text-primary hover:underline",children:e.cafeContact.email})]})]})]}),"approved"===e.status&&!e.pickupWindow&&(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-900 mb-1",children:"âœ… Request Approved!"}),(0,t.jsxs)("p",{className:"text-sm text-green-800",children:["Please coordinate the final pickup time with the cafÃ©. Your preferred time was: ",e.preferredTime||"Not specified"]})]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>L(t=>({...t,[e.id]:!t[e.id]})),className:"w-full sm:w-auto",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4 mr-2"}),_[e.id]?"Hide":"Show"," Pickup Coordination"]}),_[e.id]&&(0,t.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(m.MapPin,{className:"w-5 h-5 text-amber-700"}),(0,t.jsx)("p",{className:"text-base font-bold text-amber-900",children:"Pickup Coordination"})]}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-amber-700",children:"ðŸ“"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"CafÃ©: "}),(0,t.jsx)("span",{className:"text-amber-800",children:e.cafeName||"Green CafÃ©"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-amber-700",children:"â°"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Pickup Window: "}),(0,t.jsx)("span",{className:"text-amber-800",children:"Within 24 hours of approval"})]})]}),e.cafeContact?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-amber-700",children:"ðŸ“ž"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person: "}),(0,t.jsx)("span",{className:"text-amber-800",children:e.cafeContact.name||"CafÃ© Admin"})]})]}),e.cafeContact.email&&(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-amber-700",children:"âœ‰ï¸"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Email: "}),(0,t.jsx)("a",{href:`mailto:${e.cafeContact.email}`,className:"text-amber-700 hover:underline font-medium",children:e.cafeContact.email})]})]})]}):(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-amber-700",children:"ðŸ“ž"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person: "}),(0,t.jsx)("span",{className:"text-amber-800",children:"CafÃ© Admin"})]})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-3 border-t border-amber-200",children:(0,t.jsx)("p",{className:"text-sm text-amber-800 italic",children:"Please contact the cafÃ© to arrange pickup time."})})]})]})]})})},e.id))}):v?(0,t.jsx)(a.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Loading available food items..."})}):0===N.length?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(a.Card,{className:"p-12 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"No edible food items available at the moment. Check back later!"})}),E.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-display font-bold text-xl text-foreground mb-4",children:["Requesting Collection (",E.filter(e=>"pending"===e.status||"approved"===e.status).length,")"]}),(0,t.jsx)("div",{className:"grid gap-6",children:E.filter(e=>"pending"===e.status||"approved"===e.status).map(e=>(0,t.jsx)(a.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,t.jsx)("div",{className:"flex items-start justify-between gap-6",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(d.Heart,{className:"w-6 h-6 text-red-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-display font-bold text-xl text-foreground",children:e.itemName||"Unknown Item"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.cafeName||"Green CafÃ©"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:(0,t.jsxs)("span",{className:"text-sm",children:["Quantity: ",(0,t.jsxs)("span",{className:"font-medium text-foreground",children:[e.quantity||0," kg"]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(c.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm",children:["Requested: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:new Date(e.requestedAt).toLocaleDateString()})]})]})]}),e.preferredTime&&(0,t.jsxs)("div",{className:"mb-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Preferred Collection Time:"}),(0,t.jsx)("p",{className:"text-sm text-green-800",children:e.preferredTime})]}),e.notes&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Notes: ",e.notes]})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3 flex-wrap",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${"approved"===e.status?"bg-green-500/10 text-green-600 border border-green-500/20":"rejected"===e.status?"bg-red-500/10 text-red-600 border border-red-500/20":"collected"===e.status?"bg-primary/10 text-primary border border-primary/20":"bg-amber-500/10 text-amber-600 border border-amber-500/20"}`,children:["approved"===e.status&&(0,t.jsx)(u.CheckCircle,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"capitalize",children:e.status})]}),"approved"===e.status&&e.cafeContact&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Contact:"}),(0,t.jsx)("span",{children:e.cafeContact.name||"CafÃ© Admin"}),e.cafeContact.email&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,t.jsx)("a",{href:`mailto:${e.cafeContact.email}`,className:"text-primary hover:underline",children:e.cafeContact.email})]})]})]}),"approved"===e.status&&!e.pickupWindow&&(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-900 mb-1",children:"âœ… Request Approved!"}),(0,t.jsxs)("p",{className:"text-sm text-green-800",children:["Please coordinate the final collection time with the cafÃ©. Your preferred time was: ",e.preferredTime||"Not specified"]})]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>L(t=>({...t,[e.id]:!t[e.id]})),className:"w-full sm:w-auto",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4 mr-2"}),_[e.id]?"Hide":"Show"," Pickup Coordination"]}),_[e.id]&&(0,t.jsxs)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(m.MapPin,{className:"w-5 h-5 text-amber-700"}),(0,t.jsx)("p",{className:"text-sm font-bold text-amber-900",children:"Pickup Instructions"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Location:"}),(0,t.jsx)("span",{className:"text-amber-800 ml-2",children:e.cafeName||"Green CafÃ©"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Pickup Window:"}),(0,t.jsx)("span",{className:"text-amber-800 ml-2",children:"Within 24 hours of approval"})]}),e.cafeContact&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person:"}),(0,t.jsxs)("div",{className:"text-amber-800 ml-2 mt-1",children:[(0,t.jsx)("p",{children:e.cafeContact.name||"CafÃ© Staff"}),e.cafeContact.email&&(0,t.jsxs)("p",{className:"text-xs flex items-center gap-1",children:[(0,t.jsx)(x,{className:"w-3 h-3"}),(0,t.jsx)("a",{href:`mailto:${e.cafeContact.email}`,className:"text-amber-700 hover:underline",children:e.cafeContact.email})]})]})]}),!e.cafeContact&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-amber-900",children:"Contact Person:"}),(0,t.jsx)("span",{className:"text-amber-800 ml-2",children:"Please contact the cafÃ© directly"})]})]})]})]}),"scheduled"===e.status&&e.pickupWindow&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"ðŸ“… Pickup Scheduled!"}),(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:["Date: ",e.pickupWindow.date]}),(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:["Time: ",e.pickupWindow.from," - ",e.pickupWindow.to]})]})]})})},e.id))})]})]}):(0,t.jsx)("div",{className:"grid gap-6",children:N.map(s=>(0,t.jsx)(a.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(d.Heart,{className:"w-6 h-6 text-red-500"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-display font-bold text-xl text-foreground",children:s.item}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s.cafe}),s.cafeContact&&(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{className:"font-medium",children:"ðŸ“ž Contact:"}),(0,t.jsx)("span",{children:s.cafeContact.name||"CafÃ© Admin"})]}),s.cafeContact.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"âœ‰ï¸ Email:"}),(0,t.jsx)("a",{href:`mailto:${s.cafeContact.email}`,className:"text-primary hover:underline",children:s.cafeContact.email})]})]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(c.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm",children:["Expires: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:s.expiry})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:s.distance})," away"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),(0,t.jsx)("span",{className:"font-bold text-lg text-foreground",children:s.quantity})]}),s.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s.location})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-3",children:["pending"===s.requestStatus||e.includes(s.id)?(0,t.jsxs)(r.Button,{disabled:!0,className:"bg-gray-400 text-white cursor-not-allowed",children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Pending Approval"]}):(0,t.jsxs)(r.Button,{onClick:()=>{S(s),D(!0)},className:"bg-red-500 hover:bg-red-600 text-white",children:[(0,t.jsx)(d.Heart,{className:"w-4 h-4 mr-2"}),"Request Pickup"]}),(0,t.jsx)(r.Button,{variant:"outline",size:"sm",children:"View Details"})]})]})},s.id))}),(0,t.jsx)(n.Dialog,{open:P,onOpenChange:D,children:(0,t.jsxs)(n.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(n.DialogHeader,{children:[(0,t.jsx)(n.DialogTitle,{children:"Confirm Pickup Request"}),(0,t.jsxs)(n.DialogDescription,{children:["Request pickup for ",k?.item," from ",k?.cafe]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"note",children:"Note (Optional)"}),(0,t.jsx)(l.Textarea,{id:"note",placeholder:"e.g., Please pack separately",value:R,onChange:e=>I(e.target.value),rows:3})]})}),(0,t.jsxs)(n.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),(0,t.jsxs)(r.Button,{onClick:V,className:"bg-red-500 hover:bg-red-600 text-white",children:[(0,t.jsx)(d.Heart,{className:"w-4 h-4 mr-2"}),"Confirm Request"]})]})]})})]})})]})}e.s(["default",()=>j],42481)}]);