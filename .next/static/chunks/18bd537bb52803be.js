(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74226,e=>{"use strict";let t=(0,e.i(81033).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t])},11776,e=>{"use strict";var t=e.i(74226);e.s(["Calendar",()=>t.default])},90593,e=>{"use strict";let t=(0,e.i(81033).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],90593)},40831,e=>{"use strict";var t=e.i(19063),s=e.i(18165),r=e.i(28739),a=e.i(80120),d=e.i(78857),l=e.i(11776),n=e.i(90593);let i=(0,e.i(81033).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var c=e.i(38762);let o={approved:"bg-green-500/10 text-green-600 border border-green-500/20",rejected:"bg-red-500/10 text-red-600 border border-red-500/20",collected:"bg-primary/10 text-primary border border-primary/20",scheduled:"bg-blue-500/10 text-blue-600 border border-blue-500/20",pending:"bg-amber-500/10 text-amber-600 border border-amber-500/20"};function m(){let[e,m]=(0,s.useState)([]),[u,x]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),f=async()=>{try{x(!0);let e=JSON.parse(localStorage.getItem("user")||"{}").userId||"u-charity-1",t=await fetch("/api/charity/requests",{headers:{"x-user-id":e}});if(t.ok){let e=await t.json();m(e),p(null)}else{let e=await t.text();console.error("Failed to fetch requests",t.status,e),p("Could not load your requests. Please try again.")}}catch(e){console.error("Error fetching requests",e),p(e instanceof TypeError&&"Failed to fetch"===e.message?"Cannot reach the server. Is it running?":"Unexpected error loading requests.")}finally{x(!1)}};return(0,s.useEffect)(()=>{f();let e=setInterval(f,15e3);return()=>clearInterval(e)},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(c.PublicNav,{}),(0,t.jsx)("main",{className:"pt-24 px-4 pb-12",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-5xl space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-500/10 mb-3",children:(0,t.jsx)(d.Heart,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h1",{className:"font-display font-bold text-3xl text-foreground",children:"My Pickup Requests"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Track the status of your pickup requests and preferred times."})]}),h&&(0,t.jsx)(r.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:h})}),!h&&u&&(0,t.jsx)(r.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Loading your requests..."})}),!h&&!u&&0===e.length&&(0,t.jsx)(r.Card,{className:"p-6",children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"You haven’t made any pickup requests yet."})}),!h&&!u&&e.length>0&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Item Name"}),(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Café Name"}),(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Status"}),(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Note"}),(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Pickup Window"}),(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Created Date"}),(0,t.jsx)("th",{className:"text-left p-3 font-semibold text-sm text-muted-foreground",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsx)("div",{className:"font-medium",children:e.itemName||"Unknown item"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Quantity: ",e.quantity??"N/A"," kg"]})]}),(0,t.jsx)("td",{className:"p-3",children:e.cafeName||"Café"}),(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o[e.status]||"bg-amber-500/10 text-amber-600 border border-amber-500/20"}`,children:e.status}),"approved"===e.status&&(0,t.jsx)("div",{className:"mt-2 text-xs text-green-700 bg-green-50 px-2 py-1 rounded border border-green-200",children:"Your request is approved. Café will provide a pickup time soon."})]}),(0,t.jsx)("td",{className:"p-3 text-sm text-muted-foreground",children:e.notes||"—"}),(0,t.jsx)("td",{className:"p-3 text-sm text-muted-foreground",children:"scheduled"===e.status&&e.pickupWindow?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium text-foreground",children:[(0,t.jsx)(l.Calendar,{className:"w-4 h-4 inline mr-1"}),new Date(e.pickupWindow.date).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsx)(n.Clock,{className:"w-3 h-3 inline mr-1"}),e.pickupWindow.from," - ",e.pickupWindow.to]})]}):"—"}),(0,t.jsxs)("td",{className:"p-3 text-sm text-muted-foreground",children:[new Date(e.requestedAt).toLocaleDateString()," ",new Date(e.requestedAt).toLocaleTimeString()]}),(0,t.jsx)("td",{className:"p-3",children:"scheduled"===e.status&&(0,t.jsxs)(a.Button,{size:"sm",variant:"outline",onClick:()=>window.location.href=`tel:${e.cafeName,"+1-555-0123"}`,children:[(0,t.jsx)(i,{className:"w-4 h-4 mr-1"}),"Call Café"]})})]},e.id))})]})})})]})})]})}e.s(["default",()=>m],40831)}]);