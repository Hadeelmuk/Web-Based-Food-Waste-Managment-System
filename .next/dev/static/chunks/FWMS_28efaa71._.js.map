{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\n/**\n * Utility function to merge Tailwind CSS classes.\n * Combines clsx and tailwind-merge to handle conditional classes properly.\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,iLAAO,EAAC,IAAA,wJAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kLAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,mLAAI,GAAG;IAE9B,qBACE,qMAAC;QACC,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,qMAAC,mLAAkB;QACjB,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,qMAAC,mLAAkB;QACjB,aAAU;QACV,WAAW,IAAA,6HAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,qMAAC,sLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,6HAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,qMAAC,sLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,6HAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/components/role-topbar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRouter } from \"next/navigation\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Settings } from \"lucide-react\"\nimport { useState, useEffect } from \"react\"\n\n/**\n * Props for RoleTopbar component.\n */\ntype RoleTopbarProps = {\n  title: string // Title to display in the topbar (e.g., \"Charity Portal\", \"Farmer Portal\")\n  onLogout?: () => void // Optional logout callback\n}\n\n/**\n * Top navigation bar for authenticated dashboard pages.\n * Displays portal title, business name, settings button, and logout button.\n */\nexport function RoleTopbar({ title, onLogout }: RoleTopbarProps) {\n  const router = useRouter()\n  const [businessName, setBusinessName] = useState<string>(\"\")\n\n  /**\n   * Fetches and displays the business name from user profile.\n   * Also listens for profile updates from the settings page.\n   */\n  useEffect(() => {\n    const fetchBusinessName = async () => {\n      try {\n        // Get user ID from localStorage\n        const storedUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\")\n        if (!storedUser.userId) return\n\n        // Use cached business name if available\n        if (storedUser.businessName) {\n          setBusinessName(storedUser.businessName)\n        }\n\n        // Fetch fresh data from API\n        const response = await fetch(\"/api/user/profile\", {\n          headers: {\n            \"x-user-id\": storedUser.userId,\n          },\n        })\n\n        if (response.ok) {\n          const data = await response.json()\n          // Prefer business name, fallback to user name\n          const name = data.business?.name || data.name || \"\"\n          setBusinessName(name)\n        }\n      } catch (error) {\n        console.error(\"Error fetching business name:\", error)\n      }\n    }\n\n    fetchBusinessName()\n\n    /**\n     * Handles custom event when profile is updated in settings page.\n     * Updates business name display without page refresh.\n     */\n    const handleProfileUpdate = (event: CustomEvent) => {\n      if (event.detail?.businessName) {\n        setBusinessName(event.detail.businessName)\n      }\n    }\n\n    // Listen for profile update events\n    window.addEventListener(\"profileUpdated\", handleProfileUpdate as EventListener)\n    \n    // Cleanup event listener on unmount\n    return () => {\n      window.removeEventListener(\"profileUpdated\", handleProfileUpdate as EventListener)\n    }\n  }, [])\n\n  /**\n   * Handles logout action.\n   * Clears localStorage and redirects to login page.\n   */\n  const handleLogout = () => {\n    if (typeof window !== \"undefined\") {\n      localStorage.removeItem(\"user\")\n    }\n    onLogout?.()\n    router.push(\"/login\")\n  }\n\n  return (\n    <header className=\"w-full bg-[#f5f3e9] border-b border-border\">\n      <div className=\"mx-auto flex items-center justify-between px-4 py-3 max-w-6xl\">\n        {/* Left side: Logo and title */}\n        <div className=\"flex items-center gap-2\">\n          <Image src=\"/placeholder-logo.png\" alt=\"Logo\" width={28} height={28} className=\"h-7 w-7 object-contain\" />\n          <span className=\"font-display font-semibold text-sm text-foreground\">{title}</span>\n        </div>\n        \n        {/* Right side: Business name, settings, logout */}\n        <div className=\"flex items-center gap-2\">\n          {/* Display business name if available */}\n          {businessName && (\n            <span className=\"text-sm text-muted-foreground hidden sm:block font-medium\">\n              {businessName}\n            </span>\n          )}\n          {/* Settings button */}\n          <Link href=\"/dashboard/settings\">\n            <Button variant=\"ghost\" size=\"icon\" title=\"Settings\">\n              <Settings className=\"w-5 h-5\" />\n            </Button>\n          </Link>\n          {/* Logout button */}\n          <button\n            onClick={handleLogout}\n            className=\"text-sm text-muted-foreground hover:text-foreground flex items-center gap-1\"\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n    </header>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AAqBO,SAAS,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAmB;;IAC7D,MAAM,SAAS,IAAA,0JAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iLAAQ,EAAS;IAEzD;;;GAGC,GACD,IAAA,kLAAS;gCAAC;YACR,MAAM;0DAAoB;oBACxB,IAAI;wBACF,gCAAgC;wBAChC,MAAM,aAAa,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,WAAW;wBAC9D,IAAI,CAAC,WAAW,MAAM,EAAE;wBAExB,wCAAwC;wBACxC,IAAI,WAAW,YAAY,EAAE;4BAC3B,gBAAgB,WAAW,YAAY;wBACzC;wBAEA,4BAA4B;wBAC5B,MAAM,WAAW,MAAM,MAAM,qBAAqB;4BAChD,SAAS;gCACP,aAAa,WAAW,MAAM;4BAChC;wBACF;wBAEA,IAAI,SAAS,EAAE,EAAE;4BACf,MAAM,OAAO,MAAM,SAAS,IAAI;4BAChC,8CAA8C;4BAC9C,MAAM,OAAO,KAAK,QAAQ,EAAE,QAAQ,KAAK,IAAI,IAAI;4BACjD,gBAAgB;wBAClB;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,iCAAiC;oBACjD;gBACF;;YAEA;YAEA;;;KAGC,GACD,MAAM;4DAAsB,CAAC;oBAC3B,IAAI,MAAM,MAAM,EAAE,cAAc;wBAC9B,gBAAgB,MAAM,MAAM,CAAC,YAAY;oBAC3C;gBACF;;YAEA,mCAAmC;YACnC,OAAO,gBAAgB,CAAC,kBAAkB;YAE1C,oCAAoC;YACpC;wCAAO;oBACL,OAAO,mBAAmB,CAAC,kBAAkB;gBAC/C;;QACF;+BAAG,EAAE;IAEL;;;GAGC,GACD,MAAM,eAAe;QACnB,wCAAmC;YACjC,aAAa,UAAU,CAAC;QAC1B;QACA;QACA,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,qMAAC;QAAO,WAAU;kBAChB,cAAA,qMAAC;YAAI,WAAU;;8BAEb,qMAAC;oBAAI,WAAU;;sCACb,qMAAC,mJAAK;4BAAC,KAAI;4BAAwB,KAAI;4BAAO,OAAO;4BAAI,QAAQ;4BAAI,WAAU;;;;;;sCAC/E,qMAAC;4BAAK,WAAU;sCAAsD;;;;;;;;;;;;8BAIxE,qMAAC;oBAAI,WAAU;;wBAEZ,8BACC,qMAAC;4BAAK,WAAU;sCACb;;;;;;sCAIL,qMAAC,kLAAI;4BAAC,MAAK;sCACT,cAAA,qMAAC,gJAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAO,OAAM;0CACxC,cAAA,qMAAC,iOAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAIxB,qMAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAzGgB;;QACC,0JAAS;;;KADV","debugId":null}},
    {"offset": {"line": 481, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/components/with-auth.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\n\n/**\n * User session data stored in localStorage after login.\n */\ntype UserSession = {\n  userId?: string\n  role?: \"admin\" | \"staff\" | \"charity\" | \"farmer\"\n  organizationName?: string\n  cafeId?: string | null\n}\n\n/**\n * Higher-order component to protect pages with authentication.\n * Checks if user is logged in and has the required role.\n * \n * @param Page - The page component to protect\n * @param allowedRoles - Array of roles that can access this page\n * @returns Protected page component\n */\nexport function withAuth<P>(\n  Page: React.ComponentType<P & { user: UserSession }>,\n  allowedRoles: UserSession[\"role\"][],\n) {\n  return function ProtectedPage(props: P) {\n    const router = useRouter()\n    const [user, setUser] = useState<UserSession | null>(null)\n\n    useEffect(() => {\n      // Skip on server-side\n      if (typeof window === \"undefined\") return\n      \n      // Remove old demo user data if it exists\n      localStorage.removeItem(\"demo_user\")\n      \n      // Get user data from localStorage\n      const stored = localStorage.getItem(\"user\")\n      const parsed: UserSession | null = stored ? JSON.parse(stored) : null\n\n      // Check if user is logged in\n      if (!parsed?.role || !parsed?.userId) {\n        router.replace(\"/login\")\n        return\n      }\n\n      // Check if user has the required role\n      if (!allowedRoles.includes(parsed.role)) {\n        router.replace(\"/not-authorized\")\n        return\n      }\n\n      // User is authorized, set user state\n      setUser(parsed)\n    }, [allowedRoles, router])\n\n    // Don't render page until user is loaded\n    if (!user) return null\n    \n    return <Page {...props} user={user} />\n  }\n}\n\n/**\n * Logs out the user by clearing localStorage and redirecting to login.\n */\nexport function logout(router: ReturnType<typeof useRouter>) {\n  if (typeof window === \"undefined\") return\n  localStorage.removeItem(\"user\")\n  router.push(\"/login\")\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAuBO,SAAS,SACd,IAAoD,EACpD,YAAmC;;IAEnC,UAAO,SAAS,cAAc,KAAQ;;QACpC,MAAM,SAAS,IAAA,0JAAS;QACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iLAAQ,EAAqB;QAErD,IAAA,kLAAS;gDAAC;gBACR,sBAAsB;gBACtB;;gBAEA,yCAAyC;gBACzC,aAAa,UAAU,CAAC;gBAExB,kCAAkC;gBAClC,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,MAAM,SAA6B,SAAS,KAAK,KAAK,CAAC,UAAU;gBAEjE,6BAA6B;gBAC7B,IAAI,CAAC,QAAQ,QAAQ,CAAC,QAAQ,QAAQ;oBACpC,OAAO,OAAO,CAAC;oBACf;gBACF;gBAEA,sCAAsC;gBACtC,IAAI,CAAC,aAAa,QAAQ,CAAC,OAAO,IAAI,GAAG;oBACvC,OAAO,OAAO,CAAC;oBACf;gBACF;gBAEA,qCAAqC;gBACrC,QAAQ;YACV;+CAAG;YAAC;YAAc;SAAO;QAEzB,yCAAyC;QACzC,IAAI,CAAC,MAAM,OAAO;QAElB,qBAAO,qMAAC;YAAM,GAAG,KAAK;YAAE,MAAM;;;;;;IAChC;;YAlCiB,0JAAS;;;AAmC5B;AAKO,SAAS,OAAO,MAAoC;IACzD;;IACA,aAAa,UAAU,CAAC;IACxB,OAAO,IAAI,CAAC;AACd","debugId":null}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/app/dashboard/farmer/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useMemo } from \"react\"\nimport { Sprout, Calendar, MapPin, CheckCircle, History } from \"lucide-react\"\n\nimport { Card } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\"\nimport { RoleTopbar } from \"@/components/role-topbar\"\nimport { withAuth } from \"@/components/with-auth\"\nimport { toast } from \"sonner\"\n\nfunction FarmerDashboardPage({ user }: { user: any }) {\n  const [availableWaste, setAvailableWaste] = useState<any[]>([])\n  const [myRequests, setMyRequests] = useState<any[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState<\"approved\" | \"request\" | \"history\">(\"approved\")\n  const [historyFilter, setHistoryFilter] = useState<\"all\" | \"weekly\" | \"monthly\" | \"yearly\">(\"all\")\n\n  // Fetch available organic waste from marketplace\n  const fetchAvailableWaste = async () => {\n    try {\n      const storedUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\")\n      if (!storedUser.userId) return\n\n      const response = await fetch(\"/api/marketplace/waste\", {\n        headers: {\n          \"x-user-id\": storedUser.userId,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setAvailableWaste(data)\n      } else {\n        // Fallback to old endpoint if marketplace fails\n        const fallbackResponse = await fetch(\"/api/farmer/available\", {\n          headers: {\n            \"x-user-id\": storedUser.userId,\n          },\n        })\n        if (fallbackResponse.ok) {\n          const fallbackData = await fallbackResponse.json()\n          setAvailableWaste(fallbackData)\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching available waste:\", error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // Fetch my collection requests\n  const fetchMyRequests = async () => {\n    try {\n      const storedUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\")\n      if (!storedUser.userId) return\n\n      const response = await fetch(\"/api/farmer/requests\", {\n        headers: {\n          \"x-user-id\": storedUser.userId,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setMyRequests(data)\n      }\n    } catch (error) {\n      console.error(\"Error fetching my requests:\", error)\n    }\n  }\n\n  useEffect(() => {\n    fetchAvailableWaste()\n    fetchMyRequests()\n\n    // Auto-refresh every 5 seconds\n    const interval = setInterval(() => {\n      fetchAvailableWaste()\n      fetchMyRequests()\n    }, 5000)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  const handleRequestCollection = async (wasteId: string, itemName: string) => {\n    try {\n      const storedUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\")\n      if (!storedUser.userId) {\n        toast.error(\"Please log in again\")\n        return\n      }\n\n      const response = await fetch(\"/api/farmer/requests\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-user-id\": storedUser.userId,\n        },\n        body: JSON.stringify({\n          wasteId,\n          requesterId: storedUser.userId,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        toast.success(\"Collection Requested\", {\n          description: `Your request for ${itemName} has been submitted. Waiting for admin approval.`,\n        })\n        // Refresh lists\n        fetchAvailableWaste()\n        fetchMyRequests()\n        // Switch to My Requests tab to show the pending request\n        setActiveTab(\"approved\")\n      } else {\n        toast.error(data.error || \"Failed to request collection\")\n      }\n    } catch (error) {\n      console.error(\"Error requesting collection:\", error)\n      toast.error(\"An error occurred. Please try again.\")\n    }\n  }\n\n  const requestedWasteIds = new Set(myRequests.map((r) => r.wasteId))\n  \n  // Filter out completed requests from active requests\n  const activeRequests = useMemo(() => {\n    return myRequests.filter((r) => r.status !== \"completed\" && r.status !== \"collected\")\n  }, [myRequests])\n  \n  // Get completed requests for history\n  const completedRequests = useMemo(() => {\n    return myRequests.filter((r) => r.status === \"completed\" || r.status === \"collected\")\n  }, [myRequests])\n  \n  // Filter history by time period\n  const filteredHistory = useMemo(() => {\n    if (historyFilter === \"all\") return completedRequests\n    \n    const now = new Date()\n    let startDate: Date\n    \n    if (historyFilter === \"weekly\") {\n      startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000)\n    } else if (historyFilter === \"monthly\") {\n      startDate = new Date(now.getFullYear(), now.getMonth(), 1)\n    } else if (historyFilter === \"yearly\") {\n      startDate = new Date(now.getFullYear(), 0, 1)\n    } else {\n      return completedRequests\n    }\n    \n    return completedRequests.filter((r) => {\n      if (!r.completedAt) return false\n      const completedDate = new Date(r.completedAt)\n      return completedDate >= startDate\n    })\n  }, [completedRequests, historyFilter])\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <RoleTopbar title=\"Farmer Portal\" />\n\n      <main className=\"pt-24 px-4 pb-12\">\n        <div className=\"container mx-auto max-w-6xl\">\n          <div className=\"text-center mb-12\">\n            <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-secondary/10 mb-4\">\n              <Sprout className=\"w-8 h-8 text-secondary\" />\n            </div>\n            <h1 className=\"font-display font-bold text-4xl text-foreground mb-3\">Farmer Portal</h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Browse available organic waste and coffee grounds from local cafés for composting and farming\n            </p>\n          </div>\n\n          <Card className=\"p-6 mb-8 bg-blue-50 border-blue-200\">\n            <h3 className=\"font-display font-bold text-lg text-blue-900 mb-2\">How It Works</h3>\n            <ol className=\"space-y-2 text-sm text-blue-800\">\n              <li>1. Browse organic waste and coffee grounds available from cafés below</li>\n              <li>2. Click \"Request Collection\" for items you need</li>\n              <li>3. Wait for café admin approval (usually within 24 hours)</li>\n              <li>4. Once approved, coordinate collection time with the café</li>\n            </ol>\n          </Card>\n\n          <Tabs value={activeTab} onValueChange={(value) => setActiveTab(value as \"approved\" | \"request\" | \"history\")} className=\"w-full\">\n            <TabsList className=\"mb-6\">\n              <TabsTrigger value=\"approved\" className=\"flex items-center gap-2\">\n                <CheckCircle className=\"w-4 h-4\" />\n                My Requests\n                {activeRequests.length > 0 && (\n                  <span className=\"ml-1 px-2 py-0.5 text-xs bg-green-500 text-white rounded-full\">\n                    {activeRequests.length}\n                  </span>\n                )}\n              </TabsTrigger>\n              <TabsTrigger value=\"request\" className=\"flex items-center gap-2\">\n                <Sprout className=\"w-4 h-4\" />\n                Request Collection\n                {availableWaste.filter((f) => !requestedWasteIds.has(f.id)).length > 0 && (\n                  <span className=\"ml-1 px-2 py-0.5 text-xs bg-red-500 text-white rounded-full\">\n                    {availableWaste.filter((f) => !requestedWasteIds.has(f.id)).length}\n                  </span>\n                )}\n              </TabsTrigger>\n              <TabsTrigger value=\"history\" className=\"flex items-center gap-2\">\n                <History className=\"w-4 h-4\" />\n                Pickup History\n                {completedRequests.length > 0 && (\n                  <span className=\"ml-1 px-2 py-0.5 text-xs bg-blue-500 text-white rounded-full\">\n                    {completedRequests.length}\n                  </span>\n                )}\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Tab 1: My Requests (Pending + Approved) */}\n            <TabsContent value=\"approved\" className=\"mt-0\">\n              <div className=\"mb-6\">\n                <h2 className=\"font-display font-bold text-2xl text-foreground mb-2\">My Requests</h2>\n                <p className=\"text-muted-foreground\">\n                  Track your collection requests. Pending requests are awaiting approval.\n                </p>\n              </div>\n\n              {isLoading ? (\n                <Card className=\"p-12 text-center\">\n                  <p className=\"text-muted-foreground\">Loading your requests...</p>\n                </Card>\n              ) : activeRequests.length === 0 ? (\n                <Card className=\"p-12 text-center border-2 border-dashed\">\n                  <CheckCircle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\n                  <p className=\"text-muted-foreground\">No active requests yet. Request items below to get started!</p>\n                </Card>\n              ) : (\n                <div className=\"grid gap-6\">\n                  {activeRequests.map((request) => {\n                    const waste = availableWaste.find((f) => f.id === request.wasteId)\n                    const isApproved = request.status === \"approved\"\n                    const isPending = request.status === \"pending\"\n                    \n                    return (\n                      <Card \n                        key={request.id} \n                        className={`p-6 border-2 hover:shadow-lg transition-shadow ${\n                          isApproved \n                            ? \"border-green-500 bg-green-50/50\" \n                            : isPending\n                            ? \"border-amber-500 bg-amber-50/50\"\n                            : \"border-gray-300 bg-gray-50/50\"\n                        }`}\n                      >\n                        <div className=\"flex items-start justify-between gap-6\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-4\">\n                              <div className={`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${\n                                isApproved \n                                  ? \"bg-green-500/20\" \n                                  : isPending\n                                  ? \"bg-amber-500/20\"\n                                  : \"bg-gray-500/20\"\n                              }`}>\n                                {isApproved ? (\n                                  <CheckCircle className=\"w-6 h-6 text-green-600\" />\n                                ) : isPending ? (\n                                  <Calendar className=\"w-6 h-6 text-amber-600\" />\n                                ) : (\n                                  <CheckCircle className=\"w-6 h-6 text-gray-600\" />\n                                )}\n                              </div>\n                              <div>\n                                <h3 className=\"font-display font-bold text-xl text-foreground\">{request.itemName || waste?.itemName}</h3>\n                                <p className={`text-sm font-medium ${\n                                  isApproved \n                                    ? \"text-green-600\" \n                                    : isPending\n                                    ? \"text-amber-600\"\n                                    : \"text-gray-600\"\n                                }`}>\n                                  {isApproved ? \"✓ Request Approved\" : isPending ? \"⏳ Pending Approval\" : `Status: ${request.status}`}\n                                </p>\n                              </div>\n                            </div>\n\n                            {isApproved && request.cafeContact && (\n                              <div className=\"mb-4 p-4 bg-white rounded-lg border border-green-200\">\n                                <p className=\"text-sm font-medium text-green-900 mb-3\">Please contact the café to arrange collection:</p>\n                                <div className=\"space-y-2 text-sm\">\n                                  <div className=\"flex items-center gap-2\">\n                                    <span className=\"font-semibold text-foreground min-w-[100px]\">Café Name:</span>\n                                    <span className=\"text-foreground\">{request.cafeName || \"Unknown Café\"}</span>\n                                  </div>\n                                  {request.cafeContact.name && (\n                                    <div className=\"flex items-center gap-2\">\n                                      <span className=\"font-semibold text-foreground min-w-[100px]\">Contact Person:</span>\n                                      <span className=\"text-foreground\">{request.cafeContact.name}</span>\n                                    </div>\n                                  )}\n                                  {request.cafeContact.email && (\n                                    <div className=\"flex items-center gap-2\">\n                                      <span className=\"font-semibold text-foreground min-w-[100px]\">Email:</span>\n                                      <a href={`mailto:${request.cafeContact.email}`} className=\"text-primary hover:underline\">\n                                        {request.cafeContact.email}\n                                      </a>\n                                    </div>\n                                  )}\n                                  {request.cafeContact.phone && (\n                                    <div className=\"flex items-center gap-2\">\n                                      <span className=\"font-semibold text-foreground min-w-[100px]\">Phone:</span>\n                                      <a href={`tel:${request.cafeContact.phone}`} className=\"text-primary hover:underline\">\n                                        {request.cafeContact.phone}\n                                      </a>\n                                    </div>\n                                  )}\n                                  {request.cafeContact.address && (\n                                    <div className=\"flex items-start gap-2\">\n                                      <span className=\"font-semibold text-foreground min-w-[100px]\">Address:</span>\n                                      <span className=\"text-foreground flex-1\">{request.cafeContact.address}</span>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            )}\n\n                            {isPending && (\n                              <div className=\"mb-4 p-4 bg-white rounded-lg border border-amber-200\">\n                                <p className=\"text-sm font-medium text-amber-900\">\n                                  Your request is pending approval. You'll be notified once the café admin reviews it.\n                                </p>\n                              </div>\n                            )}\n\n                            <div className=\"flex items-center gap-4 text-sm\">\n                              <div className=\"flex items-center gap-2 text-muted-foreground\">\n                                <Calendar className=\"w-4 h-4\" />\n                                <span>Quantity: <span className=\"font-medium text-foreground\">{request.quantity} kg</span></span>\n                              </div>\n                            </div>\n                          </div>\n\n                          <div className=\"flex flex-col items-end gap-3\">\n                            <div className={`flex items-center gap-2 ${\n                              isApproved \n                                ? \"text-green-600\" \n                                : isPending\n                                ? \"text-amber-600\"\n                                : \"text-gray-600\"\n                            }`}>\n                              {isApproved ? (\n                                <>\n                                  <CheckCircle className=\"w-5 h-5\" />\n                                  <span className=\"font-medium\">Approved</span>\n                                </>\n                              ) : isPending ? (\n                                <>\n                                  <Calendar className=\"w-5 h-5\" />\n                                  <span className=\"font-medium\">Pending</span>\n                                </>\n                              ) : (\n                                <>\n                                  <CheckCircle className=\"w-5 h-5\" />\n                                  <span className=\"font-medium capitalize\">{request.status}</span>\n                                </>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </Card>\n                    )\n                  })}\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Tab 2: Request Collection */}\n            <TabsContent value=\"request\" className=\"mt-0\">\n              <div className=\"mb-6\">\n                <h2 className=\"font-display font-bold text-2xl text-foreground mb-2\">Request Collection</h2>\n                <p className=\"text-muted-foreground\">\n                  {isLoading ? \"Loading...\" : `${availableWaste.filter((f) => !requestedWasteIds.has(f.id)).length} item${availableWaste.filter((f) => !requestedWasteIds.has(f.id)).length !== 1 ? \"s\" : \"\"} available for collection`}\n                </p>\n              </div>\n\n              {isLoading ? (\n                <Card className=\"p-12 text-center\">\n                  <p className=\"text-muted-foreground\">Loading available waste...</p>\n                </Card>\n              ) : availableWaste.filter((f) => !requestedWasteIds.has(f.id)).length === 0 ? (\n                <Card className=\"p-12 text-center border-2 border-dashed\">\n                  <Sprout className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\n                  <p className=\"text-muted-foreground\">No organic waste available at the moment. Check back later!</p>\n                </Card>\n              ) : (\n                <div className=\"grid gap-6\">\n                  {availableWaste\n                    .filter((f) => !requestedWasteIds.has(f.id))\n                    .map((waste) => {\n                      return (\n                        <Card key={waste.id} className=\"p-6 hover:shadow-lg transition-shadow\">\n                          <div className=\"flex items-start justify-between gap-6\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-3 mb-3\">\n                                <div className=\"w-12 h-12 rounded-full bg-secondary/10 flex items-center justify-center flex-shrink-0\">\n                                  <Sprout className=\"w-6 h-6 text-secondary\" />\n                                </div>\n                                <div>\n                                  <h3 className=\"font-display font-bold text-xl text-foreground\">{waste.itemName}</h3>\n                                  <p className=\"text-sm text-muted-foreground\">Café ID: {waste.cafeId}</p>\n                                </div>\n                              </div>\n\n                              <div className=\"grid md:grid-cols-2 gap-4 mb-4\">\n                                <div className=\"flex items-center gap-2 text-muted-foreground\">\n                                  <Calendar className=\"w-4 h-4\" />\n                                  <span className=\"text-sm\">\n                                    Expires: <span className=\"font-medium text-foreground\">{waste.expiryDate}</span>\n                                  </span>\n                                </div>\n                              </div>\n\n                              <div className=\"flex items-center gap-2 mb-4\">\n                                <span className=\"text-sm text-muted-foreground\">Quantity:</span>\n                                <span className=\"font-bold text-lg text-foreground\">{waste.quantity} kg</span>\n                              </div>\n                            </div>\n\n                            <div className=\"flex flex-col items-end gap-3\">\n                              <Button\n                                onClick={() => handleRequestCollection(waste.id, waste.itemName)}\n                                className=\"bg-secondary hover:bg-secondary/90 text-white\"\n                              >\n                                <Sprout className=\"w-4 h-4 mr-2\" />\n                                Request Collection\n                              </Button>\n                            </div>\n                          </div>\n                        </Card>\n                      )\n                    })}\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Tab 3: Pickup History */}\n            <TabsContent value=\"history\" className=\"mt-0\">\n              <div className=\"mb-6\">\n                <h2 className=\"font-display font-bold text-2xl text-foreground mb-2\">Pickup History</h2>\n                <p className=\"text-muted-foreground mb-4\">\n                  View your completed collection requests.\n                </p>\n                \n                {/* Filter Buttons */}\n                <div className=\"flex gap-2 flex-wrap\">\n                  <Button\n                    variant={historyFilter === \"all\" ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setHistoryFilter(\"all\")}\n                  >\n                    All\n                  </Button>\n                  <Button\n                    variant={historyFilter === \"weekly\" ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setHistoryFilter(\"weekly\")}\n                  >\n                    Weekly\n                  </Button>\n                  <Button\n                    variant={historyFilter === \"monthly\" ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setHistoryFilter(\"monthly\")}\n                  >\n                    Monthly\n                  </Button>\n                  <Button\n                    variant={historyFilter === \"yearly\" ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setHistoryFilter(\"yearly\")}\n                  >\n                    Yearly\n                  </Button>\n                </div>\n              </div>\n\n              {isLoading ? (\n                <Card className=\"p-12 text-center\">\n                  <p className=\"text-muted-foreground\">Loading history...</p>\n                </Card>\n              ) : filteredHistory.length === 0 ? (\n                <Card className=\"p-12 text-center border-2 border-dashed\">\n                  <History className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\n                  <p className=\"text-muted-foreground\">\n                    {completedRequests.length === 0 \n                      ? \"No completed collections yet. Your completed requests will appear here.\"\n                      : `No completed collections found for the selected ${historyFilter} period.`}\n                  </p>\n                </Card>\n              ) : (\n                <div className=\"grid gap-6\">\n                  {filteredHistory.map((request) => {\n                    const completedDate = request.completedAt \n                      ? new Date(request.completedAt).toLocaleDateString('en-US', { \n                          year: 'numeric', \n                          month: 'long', \n                          day: 'numeric' \n                        })\n                      : \"Unknown date\"\n                    \n                    return (\n                      <Card key={request.id} className=\"p-6 border-2 border-blue-500 bg-blue-50/50 hover:shadow-lg transition-shadow\">\n                        <div className=\"flex items-start justify-between gap-6\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-4\">\n                              <div className=\"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0\">\n                                <History className=\"w-6 h-6 text-blue-600\" />\n                              </div>\n                              <div>\n                                <h3 className=\"font-display font-bold text-xl text-foreground\">{request.itemName || \"Unknown Item\"}</h3>\n                                <p className=\"text-sm text-blue-600 font-medium\">✓ Completed</p>\n                              </div>\n                            </div>\n\n                            <div className=\"grid md:grid-cols-2 gap-4 mb-4\">\n                              <div className=\"flex items-center gap-2 text-muted-foreground\">\n                                <MapPin className=\"w-4 h-4\" />\n                                <span className=\"text-sm\">\n                                  Café: <span className=\"font-medium text-foreground\">{request.cafeName || \"Unknown Café\"}</span>\n                                </span>\n                              </div>\n                              <div className=\"flex items-center gap-2 text-muted-foreground\">\n                                <Calendar className=\"w-4 h-4\" />\n                                <span className=\"text-sm\">\n                                  Completed: <span className=\"font-medium text-foreground\">{completedDate}</span>\n                                </span>\n                              </div>\n                            </div>\n\n                            <div className=\"flex items-center gap-2 mb-4\">\n                              <span className=\"text-sm text-muted-foreground\">Quantity:</span>\n                              <span className=\"font-bold text-lg text-foreground\">{request.quantity} kg</span>\n                            </div>\n                          </div>\n\n                          <div className=\"flex flex-col items-end gap-3\">\n                            <div className=\"flex items-center gap-2 text-blue-600\">\n                              <CheckCircle className=\"w-5 h-5\" />\n                              <span className=\"font-medium\">Completed</span>\n                            </div>\n                          </div>\n                        </div>\n                      </Card>\n                    )\n                  })}\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default withAuth(FarmerDashboardPage, [\"farmer\"])"],"names":[],"mappings":"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","debugId":null}}]
}