{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/app/api/_data.ts"],"sourcesContent":["import type { User, WasteLog, PickupRequest, ActivityLog, Transport, Notification } from \"./_types\"\n\n// Dummy users (in-memory). Use x-user-id header to pick one.\nexport const users: User[] = [\n  {\n    id: \"u-admin-1\",\n    name: \"Alice Admin\",\n    email: \"alice@greencafe.com\",\n    passwordHash: \"password\", // TODO: hash passwords\n    role: \"admin\",\n    organizationName: \"Green Café\",\n    cafeId: \"cafe-1\",\n  },\n  {\n    id: \"u-staff-1\",\n    name: \"Sam Staff\",\n    email: \"sam@greencafe.com\",\n    passwordHash: \"password\",\n    role: \"staff\",\n    organizationName: \"Green Café\",\n    cafeId: \"cafe-1\",\n  },\n  {\n    id: \"u-charity-1\",\n    name: \"Charlie Charity\",\n    email: \"charity@help.org\",\n    passwordHash: \"password\",\n    role: \"charity\",\n    organizationName: \"Hope Charity\",\n    cafeId: null,\n  },\n  {\n    id: \"u-farmer-1\",\n    name: \"Fiona Farmer\",\n    email: \"farm@soil.com\",\n    passwordHash: \"password\",\n    role: \"farmer\",\n    organizationName: \"Soil & Co\",\n    cafeId: null,\n  },\n]\n\nexport const wasteLogs: WasteLog[] = [\n  {\n    id: \"w1\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Pastries\",\n    quantity: 15,\n    expiryDate: \"2025-12-05\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: \"2025-12-01T08:00:00Z\",\n    updatedAt: \"2025-12-01T08:00:00Z\",\n  },\n  {\n    id: \"w2\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Vegetable Scraps\",\n    quantity: 22,\n    expiryDate: \"2025-12-04\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: \"2025-12-01T09:00:00Z\",\n    updatedAt: \"2025-12-01T09:00:00Z\",\n  },\n  {\n    id: \"w3\",\n    cafeId: \"cafe-1\",\n    type: \"coffee\",\n    itemName: \"Coffee Grounds\",\n    quantity: 10,\n    expiryDate: \"2025-12-03\",\n    status: \"collected\",\n    assignedTo: \"farmer\",\n    createdAt: \"2025-11-30T10:00:00Z\",\n    updatedAt: \"2025-12-01T10:00:00Z\",\n  },\n  {\n    id: \"w4\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Sandwiches\",\n    quantity: 8,\n    expiryDate: \"2025-12-02\",\n    status: \"dropped\",\n    assignedTo: \"charity\",\n    createdAt: \"2025-11-30T11:00:00Z\",\n    updatedAt: \"2025-12-01T11:00:00Z\",\n  },\n  // Add more available items for charity\n  {\n    id: \"w5\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Fresh Bread\",\n    quantity: 12,\n    expiryDate: \"2025-12-10\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w6\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Muffins & Croissants\",\n    quantity: 20,\n    expiryDate: \"2025-12-08\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  // Add more available items for farmer\n  {\n    id: \"w7\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Fruit Peels\",\n    quantity: 15,\n    expiryDate: \"2025-12-09\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w8\",\n    cafeId: \"cafe-1\",\n    type: \"coffee\",\n    itemName: \"Used Coffee Grounds\",\n    quantity: 18,\n    expiryDate: \"2025-12-07\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  // Add NEW farmer items WITHOUT pickup requests (these will be available)\n  {\n    id: \"w9\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Banana Peels\",\n    quantity: 25,\n    expiryDate: \"2025-12-20\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w10\",\n    cafeId: \"cafe-1\",\n    type: \"coffee\",\n    itemName: \"Fresh Coffee Grounds\",\n    quantity: 30,\n    expiryDate: \"2025-12-18\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w11\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Vegetable Waste\",\n    quantity: 35,\n    expiryDate: \"2025-12-25\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  // Add NEW charity items WITHOUT pickup requests (these will be available)\n  {\n    id: \"w12\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Fresh Sandwiches\",\n    quantity: 18,\n    expiryDate: \"2025-12-20\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w13\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Day-Old Pastries\",\n    quantity: 22,\n    expiryDate: \"2025-12-19\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w14\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Leftover Meals\",\n    quantity: 15,\n    expiryDate: \"2025-12-22\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n]\n\nexport const pickupRequests: PickupRequest[] = [\n  {\n    id: \"p1\",\n    wasteId: \"w1\",\n    requesterId: \"u-charity-1\",\n    requesterType: \"charity\",\n    requestedAt: \"2025-12-01T12:00:00Z\",\n    status: \"pending\",\n    preferredTime: \"Morning\",\n  },\n  {\n    id: \"p2\",\n    wasteId: \"w2\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: \"2025-12-01T13:00:00Z\",\n    status: \"approved\",\n  },\n  {\n    id: \"p3\",\n    wasteId: \"w3\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: \"2025-11-30T13:00:00Z\",\n    status: \"collected\",\n  },\n  // Add approved charity request\n  {\n    id: \"p4\",\n    wasteId: \"w5\",\n    requesterId: \"u-charity-1\",\n    requesterType: \"charity\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n    notes: \"Please pack in boxes\",\n  },\n  // Add another approved charity request\n  {\n    id: \"p5\",\n    wasteId: \"w6\",\n    requesterId: \"u-charity-1\",\n    requesterType: \"charity\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n  },\n  // Add approved farmer request\n  {\n    id: \"p6\",\n    wasteId: \"w7\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n  },\n  // Add another approved farmer request\n  {\n    id: \"p7\",\n    wasteId: \"w8\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n  },\n]\n\nexport const activityLogs: ActivityLog[] = [\n  {\n    id: \"a1\",\n    userId: \"u-staff-1\",\n    actionType: \"logged\",\n    itemName: \"Pastries\",\n    createdAt: \"2025-12-01T08:00:00Z\",\n  },\n  {\n    id: \"a2\",\n    userId: \"u-charity-1\",\n    actionType: \"donationRequested\",\n    itemName: \"Pastries\",\n    createdAt: \"2025-12-01T12:05:00Z\",\n  },\n  {\n    id: \"a3\",\n    userId: \"u-farmer-1\",\n    actionType: \"farmRequest\",\n    itemName: \"Vegetable Scraps\",\n    createdAt: \"2025-12-01T13:05:00Z\",\n  },\n  {\n    id: \"a4\",\n    userId: \"u-admin-1\",\n    actionType: \"dropped\",\n    itemName: \"Sandwiches\",\n    createdAt: \"2025-12-01T14:00:00Z\",\n  },\n]\n\nexport const transports: Transport[] = []\n\nexport const notifications: Notification[] = []\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/app/api/_auth.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { users } from \"./_data\"\r\nimport type { User } from \"./_types\"\r\n\r\n// Simple helper to get a user from the x-user-id header.\r\nexport function getUser(req: NextRequest): User | null {\r\n  const userId = req.headers.get(\"x-user-id\")\r\n  if (!userId) return null\r\n  return users.find((u) => u.id === userId) || null\r\n}\r\n\r\ntype GuardResult = { user: User | null; response: NextResponse | null }\r\n\r\nfunction requireRole(req: NextRequest, role: User[\"role\"]): GuardResult {\r\n  const user = getUser(req)\r\n  if (!user) {\r\n    return { user: null, response: NextResponse.json({ error: \"Unauthorized\" }, { status: 401 }) }\r\n  }\r\n  if (user.role !== role) {\r\n    return {\r\n      user: null,\r\n      response: NextResponse.json({ error: `Forbidden: ${role} only` }, { status: 403 }),\r\n    }\r\n  }\r\n  return { user, response: null }\r\n}\r\n\r\nexport function requireAdmin(req: NextRequest) {\r\n  const base = requireRole(req, \"admin\")\r\n  if (!base.user || base.response) return base\r\n  if (!base.user.cafeId) {\r\n    return { user: null, response: NextResponse.json({ error: \"Admin has no cafe assigned\" }, { status: 400 }) }\r\n  }\r\n  return base\r\n}\r\n\r\nexport function requireStaff(req: NextRequest) {\r\n  const base = requireRole(req, \"staff\")\r\n  if (!base.user || base.response) return base\r\n  if (!base.user.cafeId) {\r\n    return { user: null, response: NextResponse.json({ error: \"Staff has no cafe assigned\" }, { status: 400 }) }\r\n  }\r\n  return base\r\n}\r\n\r\nexport function requireCharity(req: NextRequest) {\r\n  return requireRole(req, \"charity\")\r\n}\r\n\r\nexport function requireFarmer(req: NextRequest) {\r\n  return requireRole(req, \"farmer\")\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAIO,SAAS,QAAQ,GAAgB;IACtC,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC;IAC/B,IAAI,CAAC,QAAQ,OAAO;IACpB,OAAO,sIAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,WAAW;AAC/C;AAIA,SAAS,YAAY,GAAgB,EAAE,IAAkB;IACvD,MAAM,OAAO,QAAQ;IACrB,IAAI,CAAC,MAAM;QACT,OAAO;YAAE,MAAM;YAAM,UAAU,wJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QAAG;IAC/F;IACA,IAAI,KAAK,IAAI,KAAK,MAAM;QACtB,OAAO;YACL,MAAM;YACN,UAAU,wJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,CAAC,WAAW,EAAE,KAAK,KAAK,CAAC;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAClF;IACF;IACA,OAAO;QAAE;QAAM,UAAU;IAAK;AAChC;AAEO,SAAS,aAAa,GAAgB;IAC3C,MAAM,OAAO,YAAY,KAAK;IAC9B,IAAI,CAAC,KAAK,IAAI,IAAI,KAAK,QAAQ,EAAE,OAAO;IACxC,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE;QACrB,OAAO;YAAE,MAAM;YAAM,UAAU,wJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAAG;IAC7G;IACA,OAAO;AACT;AAEO,SAAS,aAAa,GAAgB;IAC3C,MAAM,OAAO,YAAY,KAAK;IAC9B,IAAI,CAAC,KAAK,IAAI,IAAI,KAAK,QAAQ,EAAE,OAAO;IACxC,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE;QACrB,OAAO;YAAE,MAAM;YAAM,UAAU,wJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAAG;IAC7G;IACA,OAAO;AACT;AAEO,SAAS,eAAe,GAAgB;IAC7C,OAAO,YAAY,KAAK;AAC1B;AAEO,SAAS,cAAc,GAAgB;IAC5C,OAAO,YAAY,KAAK;AAC1B","debugId":null}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const db =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\r\n  })\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/app/api/staff/waste/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { requireStaff, requireAdmin } from \"@/app/api/_auth\"\nimport { activityLogs, wasteLogs, notifications, users } from \"@/app/api/_data\"\nimport { db } from \"@/lib/db\"\nimport type { WasteLog } from \"@/app/api/_types\"\n\ntype CreateWasteBody = {\n  cafeId: string\n  staffUserId: string\n  type: \"edible\" | \"organic\" | \"coffee\" | \"recyclable\"\n  itemName: string\n  quantity: number\n  expiryDate: string\n  assignedTo: \"charity\" | \"farmer\"\n  notes?: string\n}\n\n// GET /api/staff/waste\n// Also allows admin users to access waste entries\nexport async function GET(req: NextRequest) {\n  try {\n    // Try staff first, then admin\n    let authResult = requireStaff(req)\n    \n    // If staff auth fails, try admin auth\n    if (!authResult.user || authResult.response) {\n      authResult = requireAdmin(req)\n    }\n    \n    if (!authResult.user || authResult.response) {\n      const errorResponse = authResult.response || NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n      errorResponse.headers.set(\"Content-Type\", \"application/json\")\n      return errorResponse\n    }\n\n    const user = authResult.user\n\n    // Get all waste logs for this cafe, sorted by most recent\n    const cafeWaste = wasteLogs\n      .filter((w) => w.cafeId === user.cafeId)\n      .sort((a, b) => b.createdAt.localeCompare(a.createdAt))\n\n    const response = NextResponse.json({\n      entries: cafeWaste,\n      total: cafeWaste.length,\n    })\n    response.headers.set(\"Content-Type\", \"application/json\")\n    return response\n  } catch (error) {\n    console.error(\"[GET /api/staff/waste] Error:\", error)\n    const errorResponse = NextResponse.json(\n      { \n        error: \"Internal server error\", \n        message: error instanceof Error ? error.message : String(error)\n      },\n      { status: 500 }\n    )\n    errorResponse.headers.set(\"Content-Type\", \"application/json\")\n    return errorResponse\n  }\n}\n\n// POST /api/staff/waste\nexport async function POST(req: NextRequest) {\n  // Declare variables in outer scope for error handling\n  let user: any = null\n  let body: Partial<CreateWasteBody> | null = null\n  \n  try {\n    const authResult = requireStaff(req)\n    \n    if (!authResult.user || authResult.response) {\n      return authResult.response || NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    user = authResult.user\n\n    try {\n      body = await req.json()\n    } catch (error) {\n      return NextResponse.json({ error: \"Invalid JSON in request body\" }, { status: 400 })\n    }\n\n    // Basic validation\n    const required = [\"cafeId\", \"staffUserId\", \"type\", \"itemName\", \"quantity\", \"expiryDate\", \"assignedTo\"] as const\n    for (const key of required) {\n      if (!body[key]) {\n        return NextResponse.json({ error: `Missing field: ${key}` }, { status: 400 })\n      }\n    }\n\n    // Validate assignedTo matches type\n    if (body.type === \"edible\" && body.assignedTo !== \"charity\") {\n      return NextResponse.json(\n        { error: \"Edible waste must be assigned to 'charity'\" },\n        { status: 400 }\n      )\n    }\n    if ((body.type === \"organic\" || body.type === \"coffee\") && body.assignedTo !== \"farmer\") {\n      return NextResponse.json(\n        { error: \"Organic/coffee waste must be assigned to 'farmer'\" },\n        { status: 400 }\n      )\n    }\n\n    if (!user.cafeId) {\n      return NextResponse.json(\n        { error: \"User is not associated with a cafe\" },\n        { status: 400 }\n      )\n    }\n\n    const now = new Date().toISOString()\n    \n    // Map waste type to database enum\n    const wasteTypeMap: Record<string, \"EDIBLE\" | \"ORGANIC\" | \"COFFEE_GROUNDS\" | \"EXPIRED\" | \"RECYCLABLE\"> = {\n      edible: \"EDIBLE\",\n      organic: \"ORGANIC\",\n      coffee: \"COFFEE_GROUNDS\",\n      expired: \"EXPIRED\",\n      recyclable: \"RECYCLABLE\",\n    }\n\n    // Map assignedTo to actionType\n    const actionTypeMap: Record<string, \"DONATE\" | \"FARM\" | \"COMPOST\" | \"DROPPED\"> = {\n      charity: \"DONATE\",\n      farmer: \"FARM\", // For organic/coffee, use FARM action\n    }\n\n    const wasteType = wasteTypeMap[body.type] || \"ORGANIC\"\n    const actionType = actionTypeMap[body.assignedTo || \"\"] || \"FARM\"\n\n    // Determine availableFor and status based on actionType\n    // STEP 4: When STAFF or ADMIN creates waste:\n    // status = PENDING\n    // availableFor must be set automatically:\n    // DONATE → CHARITY\n    // FARM or COMPOST → FARMER\n    let availableFor: \"CHARITY\" | \"FARMER\" | null = null\n    let status: \"PENDING\" | \"AVAILABLE\" | \"COMPLETED\" | \"DROPPED\" = \"PENDING\"\n    \n    if (actionType === \"DONATE\") {\n      availableFor = \"CHARITY\"\n      status = \"PENDING\"\n    } else if (actionType === \"FARM\" || actionType === \"COMPOST\") {\n      availableFor = \"FARMER\"\n      status = \"PENDING\"\n    }\n\n    // Generate ID for in-memory entry (will be used if database fails)\n    const inMemoryId = `w-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n    let dbWasteEntryId = inMemoryId\n\n    // Try to create waste entry in database, but don't fail if database is unavailable\n    try {\n      // Find or create business in database (using cafeId as identifier)\n      let business = await db.business.findFirst({\n        where: {\n          type: \"CAFE\",\n        },\n      })\n\n      // If no business exists, create a default one\n      if (!business) {\n        business = await db.business.create({\n          data: {\n            name: \"Green Café\",\n            type: \"CAFE\",\n            email: `cafe-${user.cafeId}@example.com`,\n          },\n        })\n      }\n\n      // Find or get user in database\n      let dbUser = await db.user.findFirst({\n        where: {\n          email: user.email || `user-${user.id}@example.com`,\n        },\n      })\n\n      // If user doesn't exist in DB, create one\n      if (!dbUser) {\n        dbUser = await db.user.create({\n          data: {\n            email: user.email || `user-${user.id}@example.com`,\n            password: \"temp\", // Will need proper password handling\n            role: user.role === \"admin\" ? \"ADMIN\" : \"STAFF\",\n            businessId: business.id,\n            name: user.name,\n          },\n        })\n      }\n\n      // Create waste entry in database\n      const dbWasteEntry = await db.wasteEntry.create({\n        data: {\n          wasteType,\n          subType: body.itemName,\n          quantity: Number(body.quantity),\n          actionType,\n          status,\n          availableFor,\n          expiryDate: body.expiryDate ? new Date(body.expiryDate) : null,\n          notes: body.notes,\n          loggedById: dbUser.id,\n          businessId: business.id,\n        },\n      })\n      dbWasteEntryId = dbWasteEntry.id\n      console.log(`[Staff Waste] ✅ Created waste item in database:`, {\n        id: dbWasteEntry.id,\n        itemName: body.itemName,\n        type: wasteType,\n        actionType,\n        status,\n        availableFor,\n        quantity: Number(body.quantity),\n      })\n    } catch (dbError) {\n      console.warn(`[Staff Waste] ⚠️ Database operations failed, using in-memory only:`, dbError)\n      // Continue to add to in-memory array even if database fails\n    }\n\n    // Always save to in-memory array for backward compatibility and fallback\n    const newWaste: WasteLog = {\n      id: dbWasteEntryId,\n      cafeId: user.cafeId,\n      type: body.type as WasteLog[\"type\"],\n      itemName: body.itemName!,\n      quantity: Number(body.quantity),\n      expiryDate: body.expiryDate!,\n      status: \"pending\", // In-memory uses \"pending\" instead of \"AVAILABLE\"\n      assignedTo: body.assignedTo!,\n      createdAt: now,\n      updatedAt: now,\n      notes: body.notes,\n    }\n\n    wasteLogs.push(newWaste)\n    console.log(`[Staff Waste] ✅ Added waste item to in-memory array:`, {\n      id: newWaste.id,\n      itemName: newWaste.itemName,\n      type: newWaste.type,\n      assignedTo: newWaste.assignedTo,\n      status: newWaste.status,\n      quantity: newWaste.quantity,\n    })\n\n    activityLogs.push({\n      id: `a-${Date.now()}`,\n      userId: user.id,\n      actionType: \"logged\",\n      itemName: newWaste.itemName,\n      createdAt: now,\n    })\n\n    // Create notifications for farmers/charities when new waste is available\n    if (newWaste.assignedTo === \"farmer\") {\n      // Notify all farmers about new organic/coffee waste\n      const farmerUsers = users.filter((u) => u.role === \"farmer\")\n      farmerUsers.forEach((farmer) => {\n        notifications.push({\n          id: `notif-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n          userId: farmer.id,\n          type: \"new-waste-available\",\n          title: \"New Organic Waste Available\",\n          message: `${newWaste.itemName} (${newWaste.quantity} kg) is now available from ${user.organizationName || \"Green Café\"}`,\n          read: false,\n          createdAt: now,\n          relatedWasteId: newWaste.id,\n        })\n      })\n      console.log(`[Staff Waste] ✅ Created ${farmerUsers.length} notifications for farmers`)\n    } else if (newWaste.assignedTo === \"charity\") {\n      // Notify all charities about new edible waste\n      const charityUsers = users.filter((u) => u.role === \"charity\")\n      charityUsers.forEach((charity) => {\n        notifications.push({\n          id: `notif-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n          userId: charity.id,\n          type: \"new-waste-available\",\n          title: \"New Food Available\",\n          message: `${newWaste.itemName} (${newWaste.quantity} kg) is now available from ${user.organizationName || \"Green Café\"}`,\n          read: false,\n          createdAt: now,\n          relatedWasteId: newWaste.id,\n        })\n      })\n      console.log(`[Staff Waste] ✅ Created ${charityUsers.length} notifications for charities`)\n    }\n\n    return NextResponse.json(\n      {\n        message: \"Waste successfully added\",\n        wasteId: dbWasteEntryId,\n        waste: newWaste,\n      },\n      { status: 201 }\n    )\n  } catch (error) {\n    console.error(\"[POST /api/staff/waste] Error:\", error)\n    \n    // If we have the body data and user, try to save to in-memory as fallback\n    try {\n      if (body && body.itemName && body.type && body.quantity && body.expiryDate && body.assignedTo && user) {\n        const now = new Date().toISOString()\n        const inMemoryId = `w-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n        \n        const newWaste: WasteLog = {\n          id: inMemoryId,\n          cafeId: user.cafeId || \"cafe-1\",\n          type: body.type as WasteLog[\"type\"],\n          itemName: body.itemName,\n          quantity: Number(body.quantity),\n          expiryDate: body.expiryDate,\n          status: \"pending\",\n          assignedTo: body.assignedTo,\n          createdAt: now,\n          updatedAt: now,\n          notes: body.notes,\n        }\n        wasteLogs.push(newWaste)\n        console.log(`[Staff Waste] ✅ Saved to in-memory as fallback after error`)\n        \n        return NextResponse.json(\n          {\n            message: \"Waste successfully added (saved to memory)\",\n            wasteId: inMemoryId,\n            waste: newWaste,\n          },\n          { status: 201 }\n        )\n      }\n    } catch (fallbackError) {\n      console.error(\"[POST /api/staff/waste] Fallback also failed:\", fallbackError)\n    }\n    \n    return NextResponse.json(\n      { \n        error: \"Internal server error\", \n        message: error instanceof Error ? error.message : String(error)\n      },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}