{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/app/api/_data.ts"],"sourcesContent":["import type { User, WasteLog, PickupRequest, ActivityLog, Transport, Notification } from \"./_types\"\n\n// Dummy users (in-memory). Use x-user-id header to pick one.\nexport const users: User[] = [\n  {\n    id: \"u-admin-1\",\n    name: \"Alice Admin\",\n    email: \"alice@greencafe.com\",\n    passwordHash: \"password\", // TODO: hash passwords\n    role: \"admin\",\n    organizationName: \"Green Café\",\n    cafeId: \"cafe-1\",\n  },\n  {\n    id: \"u-staff-1\",\n    name: \"Sam Staff\",\n    email: \"sam@greencafe.com\",\n    passwordHash: \"password\",\n    role: \"staff\",\n    organizationName: \"Green Café\",\n    cafeId: \"cafe-1\",\n  },\n  {\n    id: \"u-charity-1\",\n    name: \"Charlie Charity\",\n    email: \"charity@help.org\",\n    passwordHash: \"password\",\n    role: \"charity\",\n    organizationName: \"Hope Charity\",\n    cafeId: null,\n  },\n  {\n    id: \"u-farmer-1\",\n    name: \"Fiona Farmer\",\n    email: \"farm@soil.com\",\n    passwordHash: \"password\",\n    role: \"farmer\",\n    organizationName: \"Soil & Co\",\n    cafeId: null,\n  },\n]\n\nexport const wasteLogs: WasteLog[] = [\n  {\n    id: \"w1\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Pastries\",\n    quantity: 15,\n    expiryDate: \"2025-12-05\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: \"2025-12-01T08:00:00Z\",\n    updatedAt: \"2025-12-01T08:00:00Z\",\n  },\n  {\n    id: \"w2\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Vegetable Scraps\",\n    quantity: 22,\n    expiryDate: \"2025-12-04\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: \"2025-12-01T09:00:00Z\",\n    updatedAt: \"2025-12-01T09:00:00Z\",\n  },\n  {\n    id: \"w3\",\n    cafeId: \"cafe-1\",\n    type: \"coffee\",\n    itemName: \"Coffee Grounds\",\n    quantity: 10,\n    expiryDate: \"2025-12-03\",\n    status: \"collected\",\n    assignedTo: \"farmer\",\n    createdAt: \"2025-11-30T10:00:00Z\",\n    updatedAt: \"2025-12-01T10:00:00Z\",\n  },\n  {\n    id: \"w4\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Sandwiches\",\n    quantity: 8,\n    expiryDate: \"2025-12-02\",\n    status: \"dropped\",\n    assignedTo: \"charity\",\n    createdAt: \"2025-11-30T11:00:00Z\",\n    updatedAt: \"2025-12-01T11:00:00Z\",\n  },\n  // Add more available items for charity\n  {\n    id: \"w5\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Fresh Bread\",\n    quantity: 12,\n    expiryDate: \"2025-12-10\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w6\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Muffins & Croissants\",\n    quantity: 20,\n    expiryDate: \"2025-12-08\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  // Add more available items for farmer\n  {\n    id: \"w7\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Fruit Peels\",\n    quantity: 15,\n    expiryDate: \"2025-12-09\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w8\",\n    cafeId: \"cafe-1\",\n    type: \"coffee\",\n    itemName: \"Used Coffee Grounds\",\n    quantity: 18,\n    expiryDate: \"2025-12-07\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  // Add NEW farmer items WITHOUT pickup requests (these will be available)\n  {\n    id: \"w9\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Banana Peels\",\n    quantity: 25,\n    expiryDate: \"2025-12-20\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w10\",\n    cafeId: \"cafe-1\",\n    type: \"coffee\",\n    itemName: \"Fresh Coffee Grounds\",\n    quantity: 30,\n    expiryDate: \"2025-12-18\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w11\",\n    cafeId: \"cafe-1\",\n    type: \"organic\",\n    itemName: \"Vegetable Waste\",\n    quantity: 35,\n    expiryDate: \"2025-12-25\",\n    status: \"pending\",\n    assignedTo: \"farmer\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  // Add NEW charity items WITHOUT pickup requests (these will be available)\n  {\n    id: \"w12\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Fresh Sandwiches\",\n    quantity: 18,\n    expiryDate: \"2025-12-20\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w13\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Day-Old Pastries\",\n    quantity: 22,\n    expiryDate: \"2025-12-19\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: \"w14\",\n    cafeId: \"cafe-1\",\n    type: \"edible\",\n    itemName: \"Leftover Meals\",\n    quantity: 15,\n    expiryDate: \"2025-12-22\",\n    status: \"pending\",\n    assignedTo: \"charity\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n]\n\nexport const pickupRequests: PickupRequest[] = [\n  {\n    id: \"p1\",\n    wasteId: \"w1\",\n    requesterId: \"u-charity-1\",\n    requesterType: \"charity\",\n    requestedAt: \"2025-12-01T12:00:00Z\",\n    status: \"pending\",\n    preferredTime: \"Morning\",\n  },\n  {\n    id: \"p2\",\n    wasteId: \"w2\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: \"2025-12-01T13:00:00Z\",\n    status: \"approved\",\n  },\n  {\n    id: \"p3\",\n    wasteId: \"w3\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: \"2025-11-30T13:00:00Z\",\n    status: \"collected\",\n  },\n  // Add approved charity request\n  {\n    id: \"p4\",\n    wasteId: \"w5\",\n    requesterId: \"u-charity-1\",\n    requesterType: \"charity\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n    notes: \"Please pack in boxes\",\n  },\n  // Add another approved charity request\n  {\n    id: \"p5\",\n    wasteId: \"w6\",\n    requesterId: \"u-charity-1\",\n    requesterType: \"charity\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n  },\n  // Add approved farmer request\n  {\n    id: \"p6\",\n    wasteId: \"w7\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n  },\n  // Add another approved farmer request\n  {\n    id: \"p7\",\n    wasteId: \"w8\",\n    requesterId: \"u-farmer-1\",\n    requesterType: \"farmer\",\n    requestedAt: new Date().toISOString(),\n    status: \"approved\",\n  },\n]\n\nexport const activityLogs: ActivityLog[] = [\n  {\n    id: \"a1\",\n    userId: \"u-staff-1\",\n    actionType: \"logged\",\n    itemName: \"Pastries\",\n    createdAt: \"2025-12-01T08:00:00Z\",\n  },\n  {\n    id: \"a2\",\n    userId: \"u-charity-1\",\n    actionType: \"donationRequested\",\n    itemName: \"Pastries\",\n    createdAt: \"2025-12-01T12:05:00Z\",\n  },\n  {\n    id: \"a3\",\n    userId: \"u-farmer-1\",\n    actionType: \"farmRequest\",\n    itemName: \"Vegetable Scraps\",\n    createdAt: \"2025-12-01T13:05:00Z\",\n  },\n  {\n    id: \"a4\",\n    userId: \"u-admin-1\",\n    actionType: \"dropped\",\n    itemName: \"Sandwiches\",\n    createdAt: \"2025-12-01T14:00:00Z\",\n  },\n]\n\nexport const transports: Transport[] = []\n\nexport const notifications: Notification[] = []\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS%20Y3/FYP/FWMS/FWMS/app/api/auth/register/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { users } from \"@/app/api/_data\"\nimport type { User } from \"@/app/api/_types\"\n\n// POST /api/auth/register\n// Simple mock registration: adds user to in-memory users array\nexport async function POST(req: NextRequest) {\n  try {\n    const body = (await req.json().catch(() => null)) as {\n      email?: string\n      password?: string\n      businessName?: string\n      businessType?: string\n      name?: string\n      contactPerson?: string\n    } | null\n\n    if (!body?.email || !body?.password || !body?.businessName || !body?.businessType) {\n      return NextResponse.json(\n        { error: \"Email, password, business name, and business type are required\" },\n        { status: 400 }\n      )\n    }\n\n    // Check if user already exists\n    const existingUser = users.find((u) => u.email.toLowerCase() === body.email!.toLowerCase())\n    if (existingUser) {\n      return NextResponse.json({ error: \"User with this email already exists\" }, { status: 400 })\n    }\n\n    // Determine role based on business type\n    let role: User[\"role\"]\n    let cafeId: string | null = null\n\n    if (body.businessType === \"NGO\" || body.businessType === \"ngo\") {\n      role = \"charity\"\n    } else if (body.businessType === \"FARM\" || body.businessType === \"farm\") {\n      role = \"farmer\"\n    } else if (body.businessType === \"CAFE\" || body.businessType === \"cafe\" || body.businessType === \"RESTAURANT\" || body.businessType === \"restaurant\") {\n      role = \"staff\"\n      // For cafes/restaurants, assign a new cafe ID\n      cafeId = `cafe-${Date.now()}`\n    } else {\n      role = \"staff\"\n      cafeId = `cafe-${Date.now()}`\n    }\n\n    // Create new user\n    const newUser: User = {\n      id: `u-${role}-${Date.now()}`,\n      name: body.name || body.contactPerson || \"New User\",\n      email: body.email.toLowerCase(),\n      passwordHash: body.password, // Store plain password for mock (same as login)\n      role,\n      organizationName: body.businessName,\n      cafeId,\n    }\n\n    // Add to users array\n    users.push(newUser)\n\n    return NextResponse.json(\n      {\n        message: \"Registration successful\",\n        userId: newUser.id,\n        role: newUser.role,\n        organizationName: newUser.organizationName,\n        cafeId: newUser.cafeId,\n      },\n      { status: 201 }\n    )\n  } catch (error) {\n    console.error(\"[POST /api/auth/register] Error:\", error)\n    return NextResponse.json(\n      { error: \"Failed to register user\", message: error instanceof Error ? error.message : String(error) },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAKO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;QAS3C,IAAI,CAAC,MAAM,SAAS,CAAC,MAAM,YAAY,CAAC,MAAM,gBAAgB,CAAC,MAAM,cAAc;YACjF,OAAO,wJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiE,GAC1E;gBAAE,QAAQ;YAAI;QAElB;QAEA,+BAA+B;QAC/B,MAAM,eAAe,sIAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,CAAC,WAAW,OAAO,KAAK,KAAK,CAAE,WAAW;QACxF,IAAI,cAAc;YAChB,OAAO,wJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsC,GAAG;gBAAE,QAAQ;YAAI;QAC3F;QAEA,wCAAwC;QACxC,IAAI;QACJ,IAAI,SAAwB;QAE5B,IAAI,KAAK,YAAY,KAAK,SAAS,KAAK,YAAY,KAAK,OAAO;YAC9D,OAAO;QACT,OAAO,IAAI,KAAK,YAAY,KAAK,UAAU,KAAK,YAAY,KAAK,QAAQ;YACvE,OAAO;QACT,OAAO,IAAI,KAAK,YAAY,KAAK,UAAU,KAAK,YAAY,KAAK,UAAU,KAAK,YAAY,KAAK,gBAAgB,KAAK,YAAY,KAAK,cAAc;YACnJ,OAAO;YACP,8CAA8C;YAC9C,SAAS,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;QAC/B,OAAO;YACL,OAAO;YACP,SAAS,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;QAC/B;QAEA,kBAAkB;QAClB,MAAM,UAAgB;YACpB,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,KAAK,GAAG,IAAI;YAC7B,MAAM,KAAK,IAAI,IAAI,KAAK,aAAa,IAAI;YACzC,OAAO,KAAK,KAAK,CAAC,WAAW;YAC7B,cAAc,KAAK,QAAQ;YAC3B;YACA,kBAAkB,KAAK,YAAY;YACnC;QACF;QAEA,qBAAqB;QACrB,sIAAK,CAAC,IAAI,CAAC;QAEX,OAAO,wJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,QAAQ,QAAQ,EAAE;YAClB,MAAM,QAAQ,IAAI;YAClB,kBAAkB,QAAQ,gBAAgB;YAC1C,QAAQ,QAAQ,MAAM;QACxB,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,wJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAA2B,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAAO,GACpG;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}